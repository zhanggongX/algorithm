;M.add("www-ajax",function(t){function e(t){return t&&(!m||s()%100<t+"e2")}function n(t){this.measures={},this.timeStamps={},this.mark(n.MARK_TIMELINE_START,t)}function r(t){var e=this;e.id=r._id++,e.state=0,e.status=0,e._init(t)}function i(t){this.cfg=t,this.trn=r.create(t),this._init()}function a(t,e){this.q=[],this.requires=[],this.combo=e,this.tag=t,this.confs=[]}var o=t.Lang,s=o.now,u=t.mt.util,c=u.getProperty,f=u.getProperties,p=t.mt.Event,d=function(e){if(!e)return null;var n;try{n=t.JSON.parse(e)}catch(r){return null}return n},m=!!c(M,"Env.data-conf.online"),h={send:function(t){if(!this._booted){this._booted=!0,M._ERRORS=M._ERRORS||[];var n=c(M,"Env.data-conf.ravenUrl");e(.1)&&!window.Raven&&M.createAsyncScript&&n&&p.load(function(){M.createAsyncScript(n)})}t&&M._ERRORS.push(t)},_wrapFunction:function(t,e){if(!m||t._mtErrorWrapped)return t;var n=function(){var n;try{n=t.apply(this,arguments)}catch(r){o.isFunction(e)&&e(r)}return n};return n._mtErrorWrapped=!0,n},wrap:function(e,n){var r=this;if(o.isFunction(e))return r._wrapFunction(e,n);e&&o.isObject(e,!0)&&t.Object.each(e,function(t,i){o.isFunction(t)&&(e[i]=r._wrapFunction(t,n))})}};n.MARK_TIMELINE_START="_mark_timeline_start_",n.now=s,n.isValidMeasure=function(t){return t>=0},n.isValidTimeStamp=function(t){return t>0},n.prototype.mark=function(t,e){this.timeStamps[t]=n.isValidTimeStamp(e)?e:n.now()},n.prototype.measure=function(t,e,r){e=e||n.MARK_TIMELINE_START,this.setMeasure(t,(this.timeStamps[r]||n.now())-this.timeStamps[e])},n.prototype.setMeasure=function(t,e){n.isValidMeasure(e)?this.measures[t]=e:delete this.measures[t]},n.prototype.getMeasure=function(t){return this.measures[t]},n.prototype.getMeasures=function(){return t.merge(this.measures)},t.augment(r,t.EventTarget,!1,null,{prefix:"mt-trn:"}),r.EVENTS=["start","complete","success","failure","end"],r._id=0,r._map={},r.foreachEvent=function(e){t.Array.each(r.EVENTS,function(t,n){e(t,n+1)})},r.create=function(t){var e=t.tag,n=r._map,i=e&&n[e]||null;return i?i.listen(t.on,t.arguments):(i=new r(t),e&&(n[e]=i)),i},r.getErrorMessage=function(e,n){var r="";return e=f(e,["uri","method","data","tag"]),t.Object.each(t.merge(n,e),function(e,n){(e||0===e)&&("object"==typeof e&&(e=t.JSON.stringify(e)),r+=n+":"+e+"\n")}),r},r.recordTiming=function(t){var i=t.tag;if(i&&window.mta){var a=c(window,"performance.timing.navigationStart")||c(M,"TimeTracker.start");if(n.isValidTimeStamp(a)){var o=new n(a);if(o.mark("init"),r.foreachEvent(function(e){t.once(e,function(){o.mark(e)})}),e(t.pp)){var s={};t.once("end",function(){o.measure("blocking",null,"init"),o.measure("send","init","start"),o.measure("response","start","complete"),o.measure("render","complete","end"),o.measure("duration","start","end"),o.measure("request","init","end"),o.setMeasure("backend",c(t,"response.performance.backend")),o.setMeasure("latency",o.getMeasure("response")-o.getMeasure("backend")),s[i]=o.getMeasures(),window.mta("timing","api",s)})}}}},r.prototype._init=function(t){var e=this;r.foreachEvent(function(t,n){e.publish(t,{emitFacade:!0,fireOnce:!0,defaultFn:function(){e.state=n}})}),e.once("start",function(t){this.yid=t.args[0]}),e.once("complete",function(t){this.setResponse(t.args[1])}),e.tag=t.tag,e.cfg=f(t,["uri","method","data","tag"]),e.cfg.data=e.cfg.data||{},e.pp=t.performancingProbability||0,e.listen(t.on,t.arguments),r.recordTiming(e)},r.prototype.addData=function(t,e){this.cfg.data[t]=e},r.prototype.send=function(){var e=this,n=e.cfg,i=n&&n.uri,a={};if(!e._done&&i)return e._done=!0,r.foreachEvent(function(t){a[t]=function(){e.fire(t,{args:arguments})}}),t.io(i,{method:n.method||"GET",data:n.data,on:a})},r.prototype.setResponse=function(t){if(!t)return null;var e=this;return e.xhr||(e.xhr=t),e.response||(e.response=d(t.responseText)||{},o.isUndefined(e.response.status)?e.status=t.status:e.status=+e.response.status||0),e.response},r.prototype.listen=function(t,e){if(t){var n=this;return t=f(t,r.EVENTS),h.wrap(t,function(t){h.send(t)}),r.foreachEvent(function(r){o.isFunction(t[r])&&n.onceAfter(r,function(){var n=this,i=[n.yid];("success"!==r||204!==n.status&&404!==n.status)&&("start"===r&&"end"===r||i.push(n.response),i.push(e),M.window.setFrameout(function(){t[r].apply(n,i)}))})}),n}},i.DATA_ATTR_PREFIX="data-comboajax-",i.create=function(t){return t=i.getValidConfig(t),t?new i(t):null},i.getData=function(t,e){return t&&t.getAttribute(i.DATA_ATTR_PREFIX+e)||null},i.setData=function(t,e,n){t&&n&&t.setAttribute(i.DATA_ATTR_PREFIX+e,n)},i.getValidConfig=function(e){var n,r,a,s={};return e?o.isString(e)?{uri:e}:(e._node?(a=e,n="config",r=i.getData(a,n),r&&(s=c(t.mt,r)),n="on",r=i.getData(a,n),r&&(s[n]=c(t.mt,r)),t.Array.each(["data","arguments"],function(t){var e=i.getData(a,t);e&&(s[t]=d(e))}),t.Array.each(["uri","method","tag"],function(t){var e=i.getData(a,t);e&&(s[t]=e)}),s.arguments=s.arguments||{},s.arguments.node=a):"object"==typeof e&&(s=t.Object(e)),o.isFunction(s.init)&&(s.init=h.wrap(s.init,function(t){h.send(t),s={}}),s.init(a)),s.uri?s:null):null},i.prototype._init=function(){var t=this,e=c(t,"cfg.arguments.node");if(e){var n=t.trn;r.foreachEvent(function(t,r){n.once(t,function(){i.setData(e,"state",r)})}),n.listen({success:function(){var r=i.getData(e,"onsuccess");r&&(r=new Function("$response","$request",r),r.call(e,n.response,t))}})}},i.prototype.listen=function(e,n,r){function i(){t.use(e,function(t){var e=c(t.mt,n);e&&a.listen(e,o)})}var a=this.trn,o=this.cfg.arguments;r?p.load(i):i()},i.prototype.send=function(){this.trn.send()},a.combo=function(e,n){var r="/multiact/default/"+(location.pathname||""),o=new i({tag:n,performancingProbability:.1,failureRecord:!0,uri:r,method:"POST"}),s=o.trn,u=[],f={};if("object"==typeof Rohr_Opt&&"function"==typeof Rohr_Opt.reload){t.Array.each(e,function(e){var n=e.trn;if(!f[n.id]){f[n.id]=!0;var r=t.JSON.stringify(a.getComboDataItem(n.cfg));u.push(n.id+"="+encodeURIComponent(r))}});var p=u.join("&"),d=Rohr_Opt.reload(r+"?"+p);s.addData("_token",d)}var m={};t.Array.each(e,function(e){var n=e.trn;m[n.id]||(m[n.id]=!0,s.addTarget(n),s.addData(n.id,t.JSON.stringify(a.getComboDataItem(n.cfg))),s.once("complete",function(){var t=c(s,"response."+n.id);t&&n.setResponse({responseText:t})}))}),o.send()},a.getComboDataItem=function(e){var n=e.method,r=e.data,i=e.uri,a=i.split("/"),o={};return a.length>3?(o._a=a.splice(0,3).join("/"),o._p=a.join("/")):o._a=i,n&&"post"===n.toLowerCase()&&(o._m="post"),r&&(o=t.merge(r,o)),o},a.getRequires=function(t){var e;return t&&t._node?(e=i.getData(t,"requires"),e=e&&e.replace(/\s+/g,"").split(",")):t&&"object"==typeof t&&(e=t.requires),e},a.prototype.add=function(t){if(!t)return this;var e=a.getRequires(t);return e&&e.length&&(this.requires=this.requires.concat(e)),this.confs.push(t),this},a.prototype.send=function(){var e=this;t.use(e.requires,function(){var n;t.Array.each(e.confs,function(t){var n=i.create(t);n&&e.q.push(n)}),(n=e.q.length)&&(e.combo||n>1?(e.combo=!0,a.combo(e.q,e.tag)):e.q[0].send())})},t.namespace("www.Ajax"),t.www.Ajax={_T:r,_R:i,init:function(e){(e=t.one(e))&&this.create(e.all("["+i.DATA_ATTR_PREFIX+"state]"),"multiact-init",!0).add(e).send()},create:function(e,n,r){var i=new a(n,r);return t.Lang.isArray(e)||e&&e._nodes?t.each(e,i.add,i):i.add(e),i},io:function(e,n){t.www.Ajax.create(e,n).send()}}},"1.0.0",{requires:["io-base","mt-window","mt-event","mt-base"]});
;M.add("mt-formchecker",function(e){function t(){t.superclass.constructor.apply(this,arguments)}var i=e.Node,s=e.io,a=e.Object,n=e.Lang.isFunction,r=e.Lang.isString,o=e.Lang.trim,c=e.mt.util,l={old:{fieldGroup:"field-group",highlightGroup:"field-group--highlight",type:"field-group--type",ok:"field-group--ok",error:"field-group--error"},"new":{fieldGroup:"form-field",highlightGroup:"form-field--highlight",type:"form-field--type",ok:"form-field--ok",error:"form-field--error"}},u="failure";t.NAME="formChecker",t.STATUS_INIT=0,t.STATUS_CHECKING=1,t.STATUS_OK=2,t.STATUS_ERROR=3,t.CLASS_INLINE_TIP="inline-tip",t.CLASS_BLOCK_TIP="block-tip",t.CHECK_EMPTY_FN=function(e){return""===o(e.get("value"))},t.ATTRS={form:{value:null,setter:"_setForm",writeOnce:!0},fields:{value:null},checkEvent:{value:"submit",writeOnce:!0},tipClass:{value:t.CLASS_INLINE_TIP,writeOnce:!0},showOkTip:{value:!1,writeOnce:!0},highlightGroup:{value:!1,writeOnce:!0},async:{value:!1,writeOnce:!0},newStyle:{value:!1,writeOnce:!0}};var d={initializer:function(){var e,t=this,i=t.get("form"),s=t.get("fields"),a=t.get("async"),n=t.get("newStyle");if(!i)throw new Error("FormChecker: 必须设置form参数");if(!s)throw new Error("FormChecker: 必须设置fields参数");t.className=n?l["new"]:i.one("."+l.old.fieldGroup)?l.old:l["new"],t.publish("success",{emitFacade:!0,defaultFn:t._defSuccessFn}),t.publish(u,{emitFacade:!0,defaultFn:t._defFailureFn}),e={emitFacade:!0},a&&(e.defaultFn=function(){i.submit()}),t.publish("submitSuccess",e),t.publish("submitFailure",{emitFacade:!0}),t.on("fieldsChange",function(){t._buildFields()}),t._handles={},t._buildFields(),t._bind()},destructor:function(){c.detachHandle(this._handles)},_bind:function(){function t(t){s.check()?(s.fire("submitSuccess"),e.Global.fire("formChecker:submitSuccess",{instance:s})):(t.halt(!0),s.fire("submitFailure"))}function i(e){e.halt(),s._isCheckingAsync||(s._isCheckingAsync=!0,s.checkAsync(function(e){s._isCheckingAsync=!1,window.setTimeout(function(){e?s.fire("submitFailure"):s.fire("submitSuccess")},0)}))}var s=this,a=s._handles,n=s.get("form"),r=s.get("async"),o=r?i:t;a.submit=n.on("submit",o),a.focus=n.delegate("focus",function(){var e=s._getFieldByNode(this);e&&s.focusField(e,!0)},"input, textarea, select"),a.blur=n.delegate("blur",function(){var e=s._getFieldByNode(this);e&&s.blurField(e,!0)},"input, textarea, select"),e.Global.on("formChecker:valueChange",function(e){var t=s._getFieldByNode(e.node);t&&s.blurField(t,!0)}),a.success=s.on("success",function(e){s._updateUncheckedFields&&s._updateUncheckedFields(e.field.name)}),a.failure=s.on(u,function(e){s._updateUncheckedFields&&s._updateUncheckedFields(e.field.name,!0)})},checkField:function(e){function t(e,t,i){var s={field:t};e===u&&i&&(s.error=i),a.fire(e,s)}var i,a=this,n=e.node,r=e._async;e.validateReg?i=!e.validateReg.test(n.get("value")):e.validateFn&&(i=e.validateFn.call(n,n)),i?t(u,e,i):e.validateAjax?(r&&r.isInProgress()&&r.abort(),r=s(e.validateAjax.action,{method:"POST",data:c.toPostData(e.validateAjax.dataFn()),on:{success:function(i,s){var a=c.getEvalRes(s);a.status?t("success",e):t(u,e,a.msg)},failure:function(i,s){s.statusText&&"abort"===s.statusText||t(u,e,"网络有问题，请稍后重试")}}}),r.isInProgress()&&a._processType(e,"检查中..."),e._async=r):t("success",e)},check:function(){var e=this,i=e.get("fields"),s=!1;return a.each(i,function(i){i.status!==t.STATUS_INIT&&i.status!==t.STATUS_CHECKING||e.checkField(i),i.status===t.STATUS_ERROR&&(s=!0)}),!s},checkAsync:function(e){var i=this,s=i.get("fields"),n={},r=!1;if(a.each(s,function(e,i){e.status!==t.STATUS_INIT&&e.status!==t.STATUS_CHECKING||(n[i]=!0),e.status===t.STATUS_ERROR&&(r=!0)}),a.isEmpty(n))return void e(r);i._updateUncheckedFields=function(t,s){n.hasOwnProperty(t)&&(delete n[t],s&&(r=!0),a.isEmpty(n)&&(i._updateUncheckedFields=null,e(r)))},a.each(n,function(e,t){i.checkField(s[t])})},focusField:function(e,t){var i=this,s=e.node,a=e.groupNode,n=i.get("highlightGroup");t||s.focus(),s.test("input[type=text], input[type=password], textarea")&&n&&a.addClass(i.className.highlightGroup),i._processType(e)},blurField:function(e,t){var i=this,s=e.node,a=i.get("highlightGroup"),n=i.get("checkEvent");t||s.blur(),a&&e.groupNode.removeClass(i.className.highlightGroup),"blur"===n?window.setTimeout(function(){i.checkField(e)},200):i.clearTip(e)},_processType:function(e,i){e.status=t.STATUS_CHECKING,i=i||e.typeTip,""===i?this.clearTip(e):this._setTip(e,this.className.type,i)},_defSuccessFn:function(e,i){var s=e.field,a=s.showOkTip;s.status=t.STATUS_OK,a?this._setTip(s,this.className.ok,i||s.okTip||""):this.clearTip(s)},_defFailureFn:function(e){var i=e.field,s=e.error;i.status=t.STATUS_ERROR,!0===s&&(s=i.errorTip),this._setTip(i,this.className.error,s||i.errorTip)},_setTip:function(e,t,s){var a,n,o=this,c=o.get("fields"),u=o.get("tipClass"),d=o.className;if(r(e)&&(e=c[e]),a=e.groupNode,n=a.one("."+u),n||(n=i.create('<span class="'+u+'"></span>'),a.append(n)),d===l["new"])switch(t){case d.type:s='<i class="tip-status"></i>'+s;break;case d.ok:s='<i class="tip-status tip-status--success"></i>'+s;break;case d.error:s='<i class="tip-status tip-status--opinfo"></i>'+s}o.replaceGroupClass(e,t),n.setHTML(s).show()},setOkTip:function(e,t){this._setTip(e,this.className.ok,t)},setErrorTip:function(e,t){this._setTip(e,this.className.error,t)},setTypeTip:function(e,t){this._setTip(e,this.className.type,t)},clearTip:function(e){var t,i,s=this,a=s.get("fields");r(e)&&(e=a[e]),t=e.groupNode,i=t.one("."+s.get("tipClass")),i&&i.setHTML("").hide(),s.replaceGroupClass(e)},replaceGroupClass:function(t,i){var s=t.groupNode,a=this.className;e.Array.each([a.type,a.ok,a.error],function(e){s.removeClass(e)}),i&&s.addClass(i)},_getFieldByNode:function(e){var t=this.get("fields"),i=null;return a.some(t,function(t){if(t.node===e)return i=t,!0}),i},addField:function(i,s){var a=this,r=a.get("fields"),o=a.get("showOkTip"),c=e.one(s.node),l=c&&c.ancestor("."+a.className.fieldGroup);return!(!c||!l)&&(e.mix(s,{name:i,node:c,groupNode:l,status:t.STATUS_INIT,showOkTip:s.hasOwnProperty("showOkTip")?s.showOkTip:o},!0),s.validateAjax&&!n(s.validateAjax.dataFn)&&(s.validateAjax.dataFn=function(){var e={};return e[c.get("name")]=c.get("value"),e}),r[i]=s,!0)},addFields:function(e){var t,i=this,s=!0;for(t in e)e.hasOwnProperty(t)&&(s=i.addField(t,e[t])&&s);return s},removeField:function(e){var t=this,i=t.get("fields"),s=r(e)?e:e.name;return!!i.hasOwnProperty(s)&&(delete i[s],!0)},resetAllFields:function(){var t=this,i=t.get("fields");e.Object.each(i,function(e){t.resetField(e)})},resetField:function(e){var i=this,s=i.get("fields");r(e)&&(e=s[e]),e.status=t.STATUS_INIT,i.clearTip(e)},_buildFields:function(){var e=this,t=e.get("fields");a.each(t,function(i,s){e.addField(s,i)||delete t[s]})},_setForm:function(t){return e.one(t)}};e.extend(t,e.Base,d),e.mt.FormChecker=t},"1.0.0",{requires:["mt-base","io-base","base-base","node"]});
;YUI.add("attribute-complex",function(t,e){var r=t.Attribute;r.Complex=function(){},r.Complex.prototype={_normAttrVals:r.prototype._normAttrVals,_getAttrInitVal:r.prototype._getAttrInitVal},t.AttributeComplex=r.Complex},"3.16.0",{requires:["attribute-base"]});
;YUI.add("base-pluginhost",function(u,l){var n=u.Base,s=u.Plugin.Host;u.mix(n,s,!1,null,1),n.plug=s.plug,n.unplug=s.unplug},"3.16.0",{requires:["base-base","pluginhost"]});
;YUI.add("classnamemanager",function(a,e){var n="classNamePrefix",r="classNameDelimiter",s=a.config;s[n]=s[n]||"yui3",s[r]=s[r]||"-",a.ClassNameManager=function(){var e=s[n],i=s[r];return{getClassName:a.cached(function(){var n=a.Array(arguments);return!0!==n[n.length-1]?n.unshift(e):n.pop(),n.join(i)})}}()},"3.16.0",{requires:["yui-base"]});
;YUI.add("widget-base",function(t,e){function s(t){var e,n,i=this,r=i.constructor;i._strs={},i._cssPrefix=r.CSS_PREFIX||a(r.NAME.toLowerCase()),t=t||{},s.superclass.constructor.call(i,t),(n=i.get(T))&&(n!==y&&(e=n),i.render(e))}var n,i,r=t.Lang,o=t.Node,u=t.ClassNameManager,a=u.getClassName,c=t.cached(function(t){return t.substring(0,1).toUpperCase()+t.substring(1)}),l="content",h="visible",d="disabled",_="focused",g="width",f="height",N="boundingBox",m="contentBox",v="ownerDocument",C="srcNode",b="tabIndex",I="id",T="render",p="rendered",D="strings",E="<div></div>",S="loading",U="_uiSet",B=function(){},y=!0,A=!1,F={},x=[h,d,f,g,_,b],O=t.UA.webkit,w={};s.NAME="widget",i=s.UI_SRC="ui",s.ATTRS=F,F[I]={valueFn:"_guid",writeOnce:y},F[p]={value:A,readOnly:y},F[N]={valueFn:"_defaultBB",setter:"_setBB",writeOnce:y},F[m]={valueFn:"_defaultCB",setter:"_setCB",writeOnce:y},F[b]={value:null,validator:"_validTabIndex"},F[_]={value:A,readOnly:y},F[d]={value:A},F[h]={value:y},F[f]={value:""},F[g]={value:""},F[D]={value:{},setter:"_strSetter",getter:"_strGetter"},F[T]={value:A,writeOnce:y},s.CSS_PREFIX=a(s.NAME.toLowerCase()),s.getClassName=function(){return a.apply(u,[s.CSS_PREFIX].concat(t.Array(arguments),!0))},n=s.getClassName,s.getByNode=function(e){var s,i=n();return e=o.one(e),e&&(e=e.ancestor("."+i,!0))&&(s=w[t.stamp(e,!0)]),s||null},t.extend(s,t.Base,{getClassName:function(){return a.apply(u,[this._cssPrefix].concat(t.Array(arguments),!0))},initializer:function(e){var s=this.get(N);s instanceof o&&this._mapInstance(t.stamp(s))},_mapInstance:function(t){w[t]=this},destructor:function(){var e,s=this.get(N);s instanceof o&&(e=t.stamp(s,!0),e in w&&delete w[e],this._destroyBox())},destroy:function(t){return this._destroyAllNodes=t,s.superclass.destroy.apply(this)},_destroyBox:function(){var t,e=this.get(N),s=this.get(m),n=this._destroyAllNodes;t=e&&e.compareTo(s),this.UI_EVENTS&&this._destroyUIEvents(),this._unbindUI(e),s&&(n&&s.empty(),s.remove(y)),t||(n&&e.empty(),e.remove(y))},render:function(t){return!this.get("destroyed")&&!this.get(p)&&(this.publish(T,{queuable:A,fireOnce:y,defaultTargetOnly:y,defaultFn:this._defRenderFn}),this.fire(T,{parentNode:t?o.one(t):null})),this},_defRenderFn:function(t){this._parentNode=t.parentNode,this.renderer(),this._set(p,y),this._removeLoadingClassNames()},renderer:function(){var t=this;t._renderUI(),t.renderUI(),t._bindUI(),t.bindUI(),t._syncUI(),t.syncUI()},bindUI:B,renderUI:B,syncUI:B,hide:function(){return this.set(h,A)},show:function(){return this.set(h,y)},focus:function(){return this._set(_,y)},blur:function(){return this._set(_,A)},enable:function(){return this.set(d,A)},disable:function(){return this.set(d,y)},_uiSizeCB:function(t){this.get(m).toggleClass(n(l,"expanded"),t)},_renderBox:function(t){var e=this,s=e.get(m),n=e.get(N),i=e.get(C),r=e.DEF_PARENT_NODE,u=i&&i.get(v)||n.get(v)||s.get(v);i&&!i.compareTo(s)&&!s.inDoc(u)&&i.replace(s),!n.compareTo(s.get("parentNode"))&&!n.compareTo(s)&&(s.inDoc(u)&&s.replace(n),n.appendChild(s)),t=t||r&&o.one(r),t?t.appendChild(n):n.inDoc(u)||o.one("body").insert(n,0)},_setBB:function(t){return this._setBox(this.get(I),t,this.BOUNDING_TEMPLATE,!0)},_setCB:function(t){return null===this.CONTENT_TEMPLATE?this.get(N):this._setBox(null,t,this.CONTENT_TEMPLATE,!1)},_defaultBB:function(){var t=this.get(C),e=null===this.CONTENT_TEMPLATE;return t&&e?t:null},_defaultCB:function(t){return this.get(C)||null},_setBox:function(e,s,n,i){return s=o.one(s),s||(s=o.create(n),i?this._bbFromTemplate=!0:this._cbFromTemplate=!0),s.get(I)||s.set(I,e||t.guid()),s},_renderUI:function(){this._renderBoxClassNames(),this._renderBox(this._parentNode)},_renderBoxClassNames:function(){var t,e,s=this._getClasses(),i=this.get(N);for(i.addClass(n()),e=s.length-3;e>=0;e--)t=s[e],i.addClass(t.CSS_PREFIX||a(t.NAME.toLowerCase()));this.get(m).addClass(this.getClassName(l))},_removeLoadingClassNames:function(){var t=this.get(N),e=this.get(m),s=this.getClassName(S),i=n(S);t.removeClass(i).removeClass(s),e.removeClass(i).removeClass(s)},_bindUI:function(){this._bindAttrUI(this._UI_ATTRS.BIND),this._bindDOM()},_unbindUI:function(t){this._unbindDOM(t)},_bindDOM:function(){var e=this.get(N).get(v),n=s._hDocFocus;n||(n=s._hDocFocus=e.on("focus",this._onDocFocus,this),n.listeners={count:0}),n.listeners[t.stamp(this,!0)]=!0,n.listeners.count++,O&&(this._hDocMouseDown=e.on("mousedown",this._onDocMouseDown,this))},_unbindDOM:function(e){var n,i=s._hDocFocus,r=t.stamp(this,!0),o=this._hDocMouseDown;i&&(n=i.listeners,n[r]&&(delete n[r],n.count--),0===n.count&&(i.detach(),s._hDocFocus=null)),O&&o&&o.detach()},_syncUI:function(){this._syncAttrUI(this._UI_ATTRS.SYNC)},_uiSetHeight:function(t){this._uiSetDim(f,t),this._uiSizeCB(""!==t&&"auto"!==t)},_uiSetWidth:function(t){this._uiSetDim(g,t)},_uiSetDim:function(t,e){this.get(N).setStyle(t,r.isNumber(e)?e+this.DEF_UNIT:e)},_uiSetVisible:function(t){this.get(N).toggleClass(this.getClassName("hidden"),!t)},_uiSetDisabled:function(t){this.get(N).toggleClass(this.getClassName(d),t)},_uiSetFocused:function(t,e){var s=this.get(N);s.toggleClass(this.getClassName(_),t),e!==i&&(t?s.focus():s.blur())},_uiSetTabIndex:function(t){var e=this.get(N);r.isNumber(t)?e.set(b,t):e.removeAttribute(b)},_onDocMouseDown:function(t){this._domFocus&&this._onDocFocus(t)},_onDocFocus:function(t){var e=s.getByNode(t.target),n=s._active;n&&n!==e&&(n._domFocus=!1,n._set(_,!1,{src:i}),s._active=null),e&&(e._domFocus=!0,e._set(_,!0,{src:i}),s._active=e)},toString:function(){return this.name+"["+this.get(I)+"]"},DEF_UNIT:"px",DEF_PARENT_NODE:null,CONTENT_TEMPLATE:E,BOUNDING_TEMPLATE:E,_guid:function(){return t.guid()},_validTabIndex:function(t){return r.isNumber(t)||r.isNull(t)},_bindAttrUI:function(t){var e,s=t.length;for(e=0;e<s;e++)this.after(t[e]+"Change",this._setAttrUI)},_syncAttrUI:function(t){var e,s,n=t.length;for(e=0;e<n;e++)s=t[e],this[U+c(s)](this.get(s))},_setAttrUI:function(t){t.target===this&&this[U+c(t.attrName)](t.newVal,t.src)},_strSetter:function(e){return t.merge(this.get(D),e)},getString:function(t){return this.get(D)[t]},getStrings:function(){return this.get(D)},_UI_ATTRS:{BIND:x,SYNC:x}}),t.Widget=s},"3.16.0",{requires:["attribute","base-base","base-pluginhost","classnamemanager","event-focus","node-base","node-style"],skinnable:!0});
;YUI.add("widget-htmlparser",function(e,t){var n=e.Widget,r=e.Node,o=e.Lang;n.HTML_PARSER={},n._buildCfg={aggregates:["HTML_PARSER"]},n.ATTRS.srcNode={value:null,setter:r.one,getter:"_getSrcNode",writeOnce:!0},e.mix(n.prototype,{_getSrcNode:function(e){return e||this.get("contentBox")},_preAddAttrs:function(e,t,n){var r={id:e.id,boundingBox:e.boundingBox,contentBox:e.contentBox,srcNode:e.srcNode};this.addAttrs(r,t,n),delete e.boundingBox,delete e.contentBox,delete e.srcNode,delete e.id,this._applyParser&&this._applyParser(t)},_applyParsedConfig:function(t,n,r){return r?e.mix(n,r,!1):n},_applyParser:function(t){var n,r,i=this,s=this._getNodeToParse(),d=i._getHtmlParser();d&&s&&e.Object.each(d,function(e,t,d){r=null,o.isFunction(e)?r=e.call(i,s):o.isArray(e)?(r=s.all(e[0]),r.isEmpty()&&(r=null)):r=s.one(e),null!==r&&r!==undefined&&(n=n||{},n[t]=r)}),t=i._applyParsedConfig(s,t,n)},_getNodeToParse:function(){var e=this.get("srcNode");return this._cbFromTemplate?null:e},_getHtmlParser:function(){var t,n,r=this._getClasses(),o={};for(t=r.length-1;t>=0;t--)(n=r[t].HTML_PARSER)&&e.mix(o,n,!0);return o}})},"3.16.0",{requires:["widget-base"]});
;YUI.add("widget-skin",function(e,t){var n=e.ClassNameManager.getClassName;e.Widget.prototype.getSkinName=function(e){var t,a,i=this.get("contentBox")||this.get("boundingBox");return e=e||n("skin",""),a=new RegExp("\\b"+e+"(\\S+)"),i&&i.ancestor(function(e){return t=e.get("className").match(a)}),t?t[1]:null}},"3.16.0",{requires:["widget-base"]});
;YUI.add("widget-uievents",function(t,e){var n=t.Widget,i=t.Lang,s=t.Widget._uievts=t.Widget._uievts||{};t.mix(n.prototype,{_destroyUIEvents:function(){var e=t.stamp(this,!0);t.each(s,function(n,i){n.instances[e]&&(delete n.instances[e],t.Object.isEmpty(n.instances)&&(n.handle.detach(),s[i]&&delete s[i]))})},UI_EVENTS:t.Node.DOM_EVENTS,_getUIEventNode:function(){return this.get("boundingBox")},_createUIEvent:function(e){var i,r=this._getUIEventNode(),a=t.stamp(r)+e,u=s[a];u||(i=r.delegate(e,function(t){var e=n.getByNode(this);e&&e._filterUIEvent(t)&&e.fire(t.type,{domEvent:t})},"."+t.Widget.getClassName()),s[a]=u={instances:{},handle:i}),u.instances[t.stamp(this)]=1},_filterUIEvent:function(t){return t.currentTarget.compareTo(t.container)||t.container.compareTo(this._getUIEventNode())},_getUIEvent:function(t){if(i.isString(t)){var e,n,s=this.parseType(t)[1];return s&&(e=s.indexOf(":"),e>-1&&(s=s.substring(e+":".length)),this.UI_EVENTS[s]&&(n=s)),n}},_initUIEvent:function(t){var e=this._getUIEvent(t),n=this._uiEvtsInitQueue||{};e&&!n[e]&&(this._uiEvtsInitQueue=n[e]=1,this.after("render",function(){this._createUIEvent(e),delete this._uiEvtsInitQueue[e]}))},on:function(t){return this._initUIEvent(t),n.superclass.on.apply(this,arguments)},publish:function(t,e){var i=this._getUIEvent(t);return i&&e&&e.defaultFn&&this._initUIEvent(i),n.superclass.publish.apply(this,arguments)}},!0)},"3.16.0",{requires:["node-event-delegate","widget-base"]});
;YUI.add("base-build",function(t,e){function r(t,e,r){r[t]&&(e[t]=(e[t]||[]).concat(r[t]))}function n(t,e,n){n._ATTR_CFG&&(e._ATTR_CFG_HASH=null,r.apply(null,arguments))}function i(t,e,r){s.modifyAttrs(e,r.ATTRS)}var u,s=t.BaseCore,a=t.Base,c=t.Lang,o="initializer",l="destructor",g=["_PLUG","_UNPLUG"];a._build=function(e,r,n,i,u,s){var c,g,_,f,m,d,p=a._build,y=p._ctor(r,s),A=p._cfg(r,s,n),C=p._mixCust,T=y._yuibuild.dynamic;for(c=0,g=n.length;c<g;c++)_=n[c],f=_.prototype,m=f[o],d=f[l],delete f[o],delete f[l],t.mix(y,_,!0,null,1),C(y,_,A),m&&(f[o]=m),d&&(f[l]=d),y._yuibuild.exts.push(_);return i&&t.mix(y.prototype,i,!0),u&&(t.mix(y,p._clean(u,A),!0),C(y,u,A)),y.prototype.hasImpl=p._impl,T&&(y.NAME=e,y.prototype.constructor=y,y.modifyAttrs=r.modifyAttrs),y},u=a._build,t.mix(u,{_mixCust:function(e,r,n){var i,u,s,a,o,l;if(n&&(i=n.aggregates,u=n.custom,s=n.statics),s&&t.mix(e,r,!0,s),i)for(l=0,o=i.length;l<o;l++)a=i[l],!e.hasOwnProperty(a)&&r.hasOwnProperty(a)&&(e[a]=c.isArray(r[a])?[]:{}),t.aggregate(e,r,!0,[a]);if(u)for(l in u)u.hasOwnProperty(l)&&u[l](l,e,r)},_tmpl:function(e){function r(){r.superclass.constructor.apply(this,arguments)}return t.extend(r,e),r},_impl:function(t){var e,r,n,i,u,s,a=this._getClasses();for(e=0,r=a.length;e<r;e++)if(n=a[e],n._yuibuild)for(i=n._yuibuild.exts,u=i.length,s=0;s<u;s++)if(i[s]===t)return!0;return!1},_ctor:function(t,e){var r=!e||!1!==e.dynamic,n=r?u._tmpl(t):t,i=n._yuibuild;return i||(i=n._yuibuild={}),i.id=i.id||null,i.exts=i.exts||[],i.dynamic=r,n},_cfg:function(e,r,n){for(var i,u,s,a=[],c={},o=[],l=r&&r.aggregates,g=r&&r.custom,_=r&&r.statics,f=e;f&&f.prototype;)i=f._buildCfg,i&&(i.aggregates&&(a=a.concat(i.aggregates)),i.custom&&t.mix(c,i.custom,!0),i.statics&&(o=o.concat(i.statics))),f=f.superclass?f.superclass.constructor:null;if(n)for(u=0,s=n.length;u<s;u++)f=n[u],(i=f._buildCfg)&&(i.aggregates&&(a=a.concat(i.aggregates)),i.custom&&t.mix(c,i.custom,!0),i.statics&&(o=o.concat(i.statics)));return l&&(a=a.concat(l)),g&&t.mix(c,r.cfgBuild,!0),_&&(o=o.concat(_)),{aggregates:a,custom:c,statics:o}},_clean:function(e,r){var n,i,u,s=t.merge(e),a=r.aggregates,c=r.custom;for(n in c)s.hasOwnProperty(n)&&delete s[n];for(i=0,u=a.length;i<u;i++)n=a[i],s.hasOwnProperty(n)&&delete s[n];return s}}),a.build=function(t,e,r,n){return u(t,e,r,null,null,n)},a.create=function(t,e,r,n,i){return u(t,e,r,n,i)},a.mix=function(t,e){return t._CACHED_CLASS_DATA&&(t._CACHED_CLASS_DATA=null),u(null,t,e,null,null,{dynamic:!1})},s._buildCfg={aggregates:g.concat(),custom:{ATTRS:i,_ATTR_CFG:n,_NON_ATTRS_CFG:r}},a._buildCfg={aggregates:g.concat(),custom:{ATTRS:i,_ATTR_CFG:n,_NON_ATTRS_CFG:r}}},"3.16.0",{requires:["base-base"]});
;YUI.add("widget-stdmod",function(t,e){function i(t){}var d=t.Lang,o=t.Node,n=t.UA,s=t.Widget,r="fillHeight",h="Node",a="Content",l="contentBox",S="height",f="offsetHeight",g="contentUpdate",u=t.Widget.UI_SRC;i.HEADER="header",i.BODY="body",i.FOOTER="footer",i.AFTER="after",i.BEFORE="before",i.REPLACE="replace";var _=i.HEADER,M=i.BODY,c=i.FOOTER,C=_+a,p=c+a,E=M+a;i.ATTRS={headerContent:{value:null},footerContent:{value:null},bodyContent:{value:null},fillHeight:{value:i.BODY,validator:function(t){return this._validateFillHeight(t)}}},i.HTML_PARSER={headerContent:function(t){return this._parseStdModHTML(_)},bodyContent:function(t){return this._parseStdModHTML(M)},footerContent:function(t){return this._parseStdModHTML(c)}},i.SECTION_CLASS_NAMES={header:s.getClassName("hd"),body:s.getClassName("bd"),footer:s.getClassName("ft")},i.TEMPLATES={header:'<div class="'+i.SECTION_CLASS_NAMES[_]+'"></div>',body:'<div class="'+i.SECTION_CLASS_NAMES[M]+'"></div>',footer:'<div class="'+i.SECTION_CLASS_NAMES[c]+'"></div>'},i.prototype={initializer:function(){this._stdModNode=this.get(l),t.before(this._renderUIStdMod,this,"renderUI"),t.before(this._bindUIStdMod,this,"bindUI"),t.before(this._syncUIStdMod,this,"syncUI")},_syncUIStdMod:function(){var t=this._stdModParsed;(!t||!t[C])&&this._uiSetStdMod(_,this.get(C)),(!t||!t[E])&&this._uiSetStdMod(M,this.get(E)),(!t||!t[p])&&this._uiSetStdMod(c,this.get(p)),this._uiSetFillHeight(this.get(r))},_renderUIStdMod:function(){this._stdModNode.addClass(s.getClassName("stdmod")),this._renderStdModSections(),this.after("headerContentChange",this._afterHeaderChange),this.after("bodyContentChange",this._afterBodyChange),this.after("footerContentChange",this._afterFooterChange)},_renderStdModSections:function(){d.isValue(this.get(C))&&this._renderStdMod(_),d.isValue(this.get(E))&&this._renderStdMod(M),d.isValue(this.get(p))&&this._renderStdMod(c)},_bindUIStdMod:function(){this.after("fillHeightChange",this._afterFillHeightChange),this.after("heightChange",this._fillHeight),this.after(g,this._fillHeight)},_afterHeaderChange:function(t){t.src!==u&&this._uiSetStdMod(_,t.newVal,t.stdModPosition)},_afterBodyChange:function(t){t.src!==u&&this._uiSetStdMod(M,t.newVal,t.stdModPosition)},_afterFooterChange:function(t){t.src!==u&&this._uiSetStdMod(c,t.newVal,t.stdModPosition)},_afterFillHeightChange:function(t){this._uiSetFillHeight(t.newVal)},_validateFillHeight:function(t){return!t||t==i.BODY||t==i.HEADER||t==i.FOOTER},_uiSetFillHeight:function(t){var e=this.getStdModNode(t),i=this._currFillNode;i&&e!==i&&i.setStyle(S,""),e&&(this._currFillNode=e),this._fillHeight()},_fillHeight:function(){if(this.get(r)){var t=this.get(S);""!=t&&"auto"!=t&&this.fillHeight(this.getStdModNode(this.get(r)))}},_uiSetStdMod:function(t,e,i){if(d.isValue(e)){var o=this.getStdModNode(t,!0);this._addStdModContent(o,e,i),this.set(t+a,this._getStdModContent(t),{src:u})}else this._eraseStdMod(t);this.fire(g)},_renderStdMod:function(t){var e=this.get(l),i=this._findStdModSection(t);return i||(i=this._getStdModTemplate(t)),this._insertStdModSection(e,t,i),this[t+h]=i,this[t+h]},_eraseStdMod:function(t){var e=this.getStdModNode(t);e&&(e.remove(!0),delete this[t+h])},_insertStdModSection:function(t,e,i){var d=t.get("firstChild");if(e!==c&&d)if(e===_)t.insertBefore(i,d);else{var o=this[c+h];o?t.insertBefore(i,o):t.appendChild(i)}else t.appendChild(i)},_getStdModTemplate:function(t){return o.create(i.TEMPLATES[t],this._stdModNode.get("ownerDocument"))},_addStdModContent:function(t,e,d){switch(d){case i.BEFORE:d=0;break;case i.AFTER:d=undefined;break;default:d=i.REPLACE}t.insert(e,d)},_getPreciseHeight:function(t){var e=t?t.get(f):0,i="getBoundingClientRect";if(t&&t.hasMethod(i)){var d=t.invoke(i);d&&(e=d.bottom-d.top)}return e},_findStdModSection:function(t){return this.get(l).one("> ."+i.SECTION_CLASS_NAMES[t])},_parseStdModHTML:function(e){var i=this._findStdModSection(e);return i?(this._stdModParsed||(this._stdModParsed={},t.before(this._applyStdModParsedConfig,this,"_applyParsedConfig")),this._stdModParsed[e+a]=1,i.get("innerHTML")):null},_applyStdModParsedConfig:function(t,e,i){var d=this._stdModParsed;d&&(d[C]=!(C in e)&&C in d,d[E]=!(E in e)&&E in d,d[p]=!(p in e)&&p in d)},_getStdModContent:function(t){return this[t+h]?this[t+h].get("childNodes"):null},setStdModContent:function(t,e,i){this.set(t+a,e,{stdModPosition:i})},getStdModNode:function(t,e){var i=this[t+h]||null;return!i&&e&&(i=this._renderStdMod(t)),i},fillHeight:function(t){if(t){for(var e,i,o=this.get(l),s=[this.headerNode,this.bodyNode,this.footerNode],r=0,h=0,a=!1,S=0,g=s.length;S<g;S++)(e=s[S])&&(e!==t?r+=this._getPreciseHeight(e):a=!0);a&&((n.ie||n.opera)&&t.set(f,0),i=o.get(f)-parseInt(o.getComputedStyle("paddingTop"),10)-parseInt(o.getComputedStyle("paddingBottom"),10)-parseInt(o.getComputedStyle("borderBottomWidth"),10)-parseInt(o.getComputedStyle("borderTopWidth"),10),d.isNumber(i)&&(h=i-r)>=0&&t.set(f,h))}}},t.WidgetStdMod=i},"3.16.0",{requires:["base-build","widget"]});
;YUI.add("widget-position",function(t,i){function e(t){}var n=t.Lang,s=t.Widget,o="xy",r=s.UI_SRC;e.ATTRS={x:{setter:function(t){this._setX(t)},getter:function(){return this._getX()},lazyAdd:!1},y:{setter:function(t){this._setY(t)},getter:function(){return this._getY()},lazyAdd:!1},xy:{value:[0,0],validator:function(t){return this._validateXY(t)}}},e.POSITIONED_CLASS_NAME=s.getClassName("positioned"),e.prototype={initializer:function(){this._posNode=this.get("boundingBox"),t.after(this._renderUIPosition,this,"renderUI"),t.after(this._syncUIPosition,this,"syncUI"),t.after(this._bindUIPosition,this,"bindUI")},_renderUIPosition:function(){this._posNode.addClass(e.POSITIONED_CLASS_NAME)},_syncUIPosition:function(){"relative"===this._posNode.getStyle("position")&&this.syncXY(),this._uiSetXY(this.get(o))},_bindUIPosition:function(){this.after("xyChange",this._afterXYChange)},move:function(){var t=arguments,i=n.isArray(t[0])?t[0]:[t[0],t[1]];this.set(o,i)},syncXY:function(){this.set(o,this._posNode.getXY(),{src:r})},_validateXY:function(t){return n.isArray(t)&&n.isNumber(t[0])&&n.isNumber(t[1])},_setX:function(t){this.set(o,[t,this.get(o)[1]])},_setY:function(t){this.set(o,[this.get(o)[0],t])},_getX:function(){return this.get(o)[0]},_getY:function(){return this.get(o)[1]},_afterXYChange:function(t){t.src!=r&&this._uiSetXY(t.newVal)},_uiSetXY:function(t){this._posNode.setXY(t)}},t.WidgetPosition=e},"3.16.0",{requires:["base-build","node-screen","widget"]});
;YUI.add("widget-position-align",function(t,e){function i(t){}var n=t.Lang,s="align",a="visible",o="offsetWidth",g="offsetHeight";i.ATTRS={align:{value:null},centered:{setter:"_setAlignCenter",lazyAdd:!1,value:!1},alignOn:{value:[],validator:t.Lang.isArray}},i.TL="tl",i.TR="tr",i.BL="bl",i.BR="br",i.TC="tc",i.RC="rc",i.BC="bc",i.LC="lc",i.CC="cc",i.prototype={initializer:function(){this._posNode||t.error("WidgetPosition needs to be added to the Widget, before WidgetPositionAlign is added"),t.after(this._bindUIPosAlign,this,"bindUI"),t.after(this._syncUIPosAlign,this,"syncUI")},_posAlignUIHandles:null,destructor:function(){this._detachPosAlignUIHandles()},_bindUIPosAlign:function(){this.after("alignChange",this._afterAlignChange),this.after("alignOnChange",this._afterAlignOnChange),this.after("visibleChange",this._syncUIPosAlign)},_syncUIPosAlign:function(){var t=this.get(s);this._uiSetVisiblePosAlign(this.get(a)),t&&this._uiSetAlign(t.node,t.points)},align:function(t,e){return arguments.length?this.set(s,{node:t,points:e}):this._syncUIPosAlign(),this},centered:function(t){return this.align(t,[i.CC,i.CC])},_setAlignCenter:function(t){return t&&this.set(s,{node:!0===t?null:t,points:[i.CC,i.CC]}),t},_uiSetAlign:function(e,s){if(!n.isArray(s)||2!==s.length)return void t.error("align: Invalid Points Arguments");var a,o,g=this._getRegion(e);if(g){switch(a=s[0],s[1]){case i.TL:o=[g.left,g.top];break;case i.TR:o=[g.right,g.top];break;case i.BL:o=[g.left,g.bottom];break;case i.BR:o=[g.right,g.bottom];break;case i.TC:o=[g.left+Math.floor(g.width/2),g.top];break;case i.BC:o=[g.left+Math.floor(g.width/2),g.bottom];break;case i.LC:o=[g.left,g.top+Math.floor(g.height/2)];break;case i.RC:o=[g.right,g.top+Math.floor(g.height/2)];break;case i.CC:o=[g.left+Math.floor(g.width/2),g.top+Math.floor(g.height/2)]}o&&this._doAlign(a,o[0],o[1])}},_uiSetVisiblePosAlign:function(t){t?this._attachPosAlignUIHandles():this._detachPosAlignUIHandles()},_attachPosAlignUIHandles:function(){if(!this._posAlignUIHandles){var e=this.get("boundingBox"),i=t.bind(this._syncUIPosAlign,this),n=[];t.Array.each(this.get("alignOn"),function(s){var a=s.eventName,o=t.one(s.node)||e;a&&n.push(o.on(a,i))}),this._posAlignUIHandles=n}},_detachPosAlignUIHandles:function(){var e=this._posAlignUIHandles;e&&(new t.EventHandle(e).detach(),this._posAlignUIHandles=null)},_doAlign:function(t,e,n){var s,a=this._posNode;switch(t){case i.TL:s=[e,n];break;case i.TR:s=[e-a.get(o),n];break;case i.BL:s=[e,n-a.get(g)];break;case i.BR:s=[e-a.get(o),n-a.get(g)];break;case i.TC:s=[e-a.get(o)/2,n];break;case i.BC:s=[e-a.get(o)/2,n-a.get(g)];break;case i.LC:s=[e,n-a.get(g)/2];break;case i.RC:s=[e-a.get(o),n-a.get(g)/2];break;case i.CC:s=[e-a.get(o)/2,n-a.get(g)/2]}s&&this.move(s)},_getRegion:function(e){var i;return e?(e=t.Node.one(e))&&(i=e.get("region")):i=this._posNode.get("viewportRegion"),i},_afterAlignChange:function(t){var e=t.newVal;e&&this._uiSetAlign(e.node,e.points)},_afterAlignOnChange:function(t){this._detachPosAlignUIHandles(),this.get(a)&&this._attachPosAlignUIHandles()}},t.WidgetPositionAlign=i},"3.16.0",{requires:["widget-position"]});
;YUI.add("widget-stack",function(e,t){function i(e){}var s=e.Lang,n=e.UA,h=e.Node,a=e.Widget,d="zIndex",r="shim",_="visible",c="shimdeferred",o="shimresize",S="visibleChange";i.ATTRS={shim:{value:6==n.ie},zIndex:{value:0,setter:"_setZIndex"}},i.HTML_PARSER={zIndex:function(e){return this._parseZIndex(e)}},i.SHIM_CLASS_NAME=a.getClassName(r),i.STACKED_CLASS_NAME=a.getClassName("stacked"),i.SHIM_TEMPLATE='<iframe class="'+i.SHIM_CLASS_NAME+'" frameborder="0" title="Widget Stacking Shim" src="javascript:false" tabindex="-1" role="presentation"></iframe>',i.prototype={initializer:function(){this._stackNode=this.get("boundingBox"),this._stackHandles={},e.after(this._renderUIStack,this,"renderUI"),e.after(this._syncUIStack,this,"syncUI"),e.after(this._bindUIStack,this,"bindUI")},_syncUIStack:function(){this._uiSetShim(this.get(r)),this._uiSetZIndex(this.get(d))},_bindUIStack:function(){this.after("shimChange",this._afterShimChange),this.after("zIndexChange",this._afterZIndexChange)},_renderUIStack:function(){this._stackNode.addClass(i.STACKED_CLASS_NAME)},_parseZIndex:function(e){var t;return t=e.inDoc()&&"static"!==e.getStyle("position")?e.getComputedStyle("zIndex"):"auto","auto"===t?null:t},_setZIndex:function(e){return s.isString(e)&&(e=parseInt(e,10)),s.isNumber(e)||(e=0),e},_afterShimChange:function(e){this._uiSetShim(e.newVal)},_afterZIndexChange:function(e){this._uiSetZIndex(e.newVal)},_uiSetZIndex:function(e){this._stackNode.setStyle(d,e)},_uiSetShim:function(e){e?(this.get(_)?this._renderShim():this._renderShimDeferred(),6==n.ie&&this._addShimResizeHandlers()):this._destroyShim()},_renderShimDeferred:function(){this._stackHandles[c]=this._stackHandles[c]||[];var e=this._stackHandles[c],t=function(e){e.newVal&&this._renderShim()};e.push(this.on(S,t))},_addShimResizeHandlers:function(){this._stackHandles[o]=this._stackHandles[o]||[];var e=this.sizeShim,t=this._stackHandles[o];t.push(this.after(S,e)),t.push(this.after("widthChange",e)),t.push(this.after("heightChange",e)),t.push(this.after("contentUpdate",e))},_detachStackHandles:function(e){var t,i=this._stackHandles[e];if(i&&i.length>0)for(;t=i.pop();)t.detach()},_renderShim:function(){var e=this._shimNode,t=this._stackNode;e||(e=this._shimNode=this._getShimTemplate(),t.insertBefore(e,t.get("firstChild")),this._detachStackHandles(c),this.sizeShim())},_destroyShim:function(){this._shimNode&&(this._shimNode.get("parentNode").removeChild(this._shimNode),this._shimNode=null,this._detachStackHandles(c),this._detachStackHandles(o))},sizeShim:function(){var e=this._shimNode,t=this._stackNode;e&&6===n.ie&&this.get(_)&&(e.setStyle("width",t.get("offsetWidth")+"px"),e.setStyle("height",t.get("offsetHeight")+"px"))},_getShimTemplate:function(){return h.create(i.SHIM_TEMPLATE,this._stackNode.get("ownerDocument"))}},e.WidgetStack=i},"3.16.0",{requires:["base-build","widget"],skinnable:!0});
;YUI.add("widget-position-constrain",function(t,n){function i(t){}var e,o="constrain",s=t.Node,r="region";i.ATTRS={constrain:{value:null,setter:"_setConstrain"},preventOverlap:{value:!1}},e=i._PREVENT_OVERLAP={x:{tltr:1,blbr:1,brbl:1,trtl:1},y:{trbr:1,tlbl:1,bltl:1,brtr:1}},i.prototype={initializer:function(){this._posNode||t.error("WidgetPosition needs to be added to the Widget, before WidgetPositionConstrain is added"),t.after(this._bindUIPosConstrained,this,"bindUI")},getConstrainedXY:function(t,n){n=n||this.get(o);var i=this._getRegion(!0===n?null:n),e=this._posNode.get(r);return[this._constrain(t[0],"x",e,i),this._constrain(t[1],"y",e,i)]},constrain:function(t,n){var i,e,s=n||this.get(o);s&&(i=t||this.get("xy"),e=this.getConstrainedXY(i,s),(e[0]!==i[0]||e[1]!==i[1])&&this.set("xy",e,{constrained:!0}))},_setConstrain:function(t){return!0===t?t:s.one(t)},_constrain:function(t,n,i,e){if(e){this.get("preventOverlap")&&(t=this._preventOverlap(t,n,i,e));var o="x"==n,s=o?e.width:e.height,r=o?i.width:i.height,a=o?e.left:e.top,h=o?e.right-r:e.bottom-r;(t<a||t>h)&&(r<s?t<a?t=a:t>h&&(t=h):t=a)}return t},_preventOverlap:function(t,n,i,o){var s,r,a,h,g,d,l=this.get("align"),c="x"===n;return l&&l.points&&e[n][l.points.join("")]&&(r=this._getRegion(l.node),r&&(s=c?i.width:i.height,a=c?r.left:r.top,h=c?r.right:r.bottom,g=c?r.left-o.left:r.top-o.top,d=c?o.right-r.right:o.bottom-r.bottom),t>a?d<s&&g>s&&(t=a-s):g<s&&d>s&&(t=h)),t},_bindUIPosConstrained:function(){this.after("constrainChange",this._afterConstrainChange),this._enableConstraints(this.get(o))},_afterConstrainChange:function(t){this._enableConstraints(t.newVal)},_enableConstraints:function(t){t?(this.constrain(),this._cxyHandle=this._cxyHandle||this.on("constrain|xyChange",this._constrainOnXYChange)):this._cxyHandle&&(this._cxyHandle.detach(),this._cxyHandle=null)},_constrainOnXYChange:function(t){t.constrained||(t.newVal=this.getConstrainedXY(t.newVal))},_getRegion:function(t){var n;return t?(t=s.one(t))&&(n=t.get(r)):n=this._posNode.get("viewportRegion"),n}},t.WidgetPositionConstrain=i},"3.16.0",{requires:["widget-position"]});
;YUI.add("overlay",function(i,t){i.Overlay=i.Base.create("overlay",i.Widget,[i.WidgetStdMod,i.WidgetPosition,i.WidgetStack,i.WidgetPositionAlign,i.WidgetPositionConstrain])},"3.16.0",{requires:["widget","widget-stdmod","widget-position","widget-position-align","widget-stack","widget-position-constrain"],skinnable:!0});
;M.add("mt-dialog",function(e){function t(){var i=arguments[0],n=t._instances[i.id];return i.useAnim?i.useAnim=e.mt.UIUtil.isSupportAnimation().animation&&e.mt.UIUtil.isSupportAnimation().transform:i.useAnim=!1,n instanceof t?(n.setAttrs(i),n):(t._instances[i.id]=this,t.superclass.constructor.apply(this,arguments),this.config=i,this)}var i=e.UA.ie,n=6===i,o=e.Lang.isString,s=e.Lang.isNumber,a=e.mt.util,l=e.mt.macro.key,d={CLOSE:"close",OPEN:"open"};t._instances={},t.NAME="mt-dialog",t.MASK_ID="mt-overlay-mask",t.IFRAME_ID="mt-overlay-iframe",t.UNDERLAY_CLASS="mt-overlay-underlay",t.OVERLAY_CONTAINER_CLASS="mt-overlay-container",t.TITLE_TPL='<h3 class="head">{title}<span class="close">关闭</span></h3><div class="body"><p class="error" style="display:none">&nbsp;</p>{content}</div>',t.NO_TITLE_TPL='<a class="close no-title" hidefocus="true">关闭</a><div class="body"><p class="error" style="display:none">&nbsp;</p>{content}</div>',t.ATTRS={id:{value:null,writeOnce:!0},width:{value:"420px",setter:"_setWidth"},zIndex:{value:102},align:{value:null},centered:{value:!0},modal:{value:!0},autoHide:{value:!1},title:{value:""},content:{value:""},useAnim:{value:!1}};var r={initializer:function(){var e=this;e._timer=null,e._dialog=null,e._scrollHandle=null,e._escHandle=null,e.publish("open",{emitFacade:!0,defaultFn:e._defOpenFn}),e.publish("close",{emitFacade:!0,defaultFn:e._defCloseFn}),e._initDialog(),e._bind()},destructor:function(){var i=this,n=e.one(e.config.doc),o=n.one("#"+t.IFRAME_ID),s=n.one("#"+t.MASK_ID);i._dialog.destroy(),i._escHandle.detach(),i._scrollHandle&&i._scrollHandle.detach(),e.one("#"+i.get("id")).destroy(!0),o&&o.destroy(!0),s&&s.destroy(!0),delete t._instances[i.get("id")]},_initDialog:function(){var t=this,i=t.getAttrs(["width","zIndex","align","centered"]);i.visible=!1,t._dialog=new e.Overlay(i),t._initOverlay()},_bind:function(){var t=this;t.on("widthChange",function(e){this._dialog.set("width",e.newVal),t.resizeUnderlay()}),t.on("titleChange",function(e){t._fillTemplate({title:e.newVal})}),t.on("contentChange",function(e){t._fillTemplate({content:e.newVal})}),t.on("centeredChange",function(e){this._dialog.set("centered",e.newVal)}),t.on("alignChange",function(e){this._dialog.set("align",e.newVal)}),t.on("autoHideChange",function(e){e.newVal&&(t._timer=window.setTimeout(function(){t.close()},1e3*parseInt(e.newVal,10)))}),t._escHandle=e.one("body").on("keydown",function(e){e.keyCode===l.ESC&&t._status===d.OPEN&&t.close()}),e.one("#"+t.get("id")).delegate("click",function(){t.close()},".close")},_fillTemplate:function(i){var n,o,s,a=this;i=i||{},n=i.title||a.get("title"),o=i.content||a.get("content"),(n||o)&&(s=n?e.Lang.sub(t.TITLE_TPL,{title:n,content:o}):e.Lang.sub(t.NO_TITLE_TPL,{content:o}),a._dialog.set("bodyContent",'<div class="mt-dialog">'+s+"</div>"),a.get("centered")&&a.set("centered",!0),a.resizeUnderlay())},_initOverlay:function(){var i,o=this,s=o.get("modal"),a=o.get("zIndex"),l=o.get("id"),d=o._dialog,r=e.one(document.body),c=r.one("#"+t.IFRAME_ID),u=r.one("#"+t.MASK_ID);s&&(n&&!c&&(c=e.Node.create('<iframe id="'+t.IFRAME_ID+'"></iframe>'),r.prepend(c)),u||(u=e.Node.create('<div id="'+t.MASK_ID+'"></div>'),c?c.insert(u,"before"):r.prepend(u)),c&&c.setStyles({width:r.get("docWidth"),height:r.get("docHeight"),zIndex:parseInt(a,10)-2,visibility:"hidden"}),u.setStyles({width:r.get("docWidth"),height:r.get("docHeight"),zIndex:parseInt(a,10)-1,visibility:"hidden"})),i=e.Node.create('<div id="'+l+'" class="'+t.OVERLAY_CONTAINER_CLASS+'"></div>'),c?c.insert(i,"after"):r.prepend(i),d.render(i),o._fillTemplate(),i.one("."+t.UNDERLAY_CLASS)||i.get("firstChild").append('<div class="'+t.UNDERLAY_CLASS+'"></div>')},open:function(){var e=this,t=e.get("id");e.fire("open",{id:t})},_defOpenFn:function(){var i=this,n=i._dialog,o=i.get("centered"),s=i.get("autoHide"),l=e.one(window),r=e.one(document),c=r.one("#"+t.IFRAME_ID),u=r.one("#"+t.MASK_ID),h=i.get("id"),p=r.one("#"+h);c&&c.setStyle("visibility","visible"),u&&u.setStyles({width:r.get("docWidth"),height:r.get("docHeight"),visibility:"visible"}),this.get("useAnim")?setTimeout(function(){n.show(),p.one(".mt-dialog").addClass("anim-popup"),p.one(".mt-overlay-underlay").addClass("anim-popup")},0):n.show(),i._status=d.OPEN,s&&i.set("autoHide",s),o&&(i.set("centered",!0),i._scrollHandle=l.on(["scroll","resize"],a.throttle(function(){i.set("centered",!0)},100)))},close:function(){var e=this,t=e.get("id");e.fire("close",{id:t})},_defCloseFn:function(){var i=this,n=i.get("modal"),o=i.get("centered"),s=i.get("id"),a=i._dialog,l=e.one(document.body),r=l.one("#"+t.MASK_ID),c=l.one("#"+t.IFRAME_ID),u=l.one("#"+s);this.get("useAnim")?u.all(".anim-popup").each(function(t){t.removeClass("anim-popup"),t.addClass("anim-hide-popup"),e.mt.UIUtil.bindAnimEndEvent(t,function(e,t){e.animationName&&"hide-popup"===e.animationName&&(a.hide(),t.removeClass("anim-hide-popup"))})}):a.hide(),i._status=d.CLOSE,n&&(r.setStyle("visibility","hidden"),c&&c.setStyle("visibility","hidden")),o&&i._scrollHandle&&i._scrollHandle.detach(),u&&u.all(".close").each(function(e){e.purge()}),window.clearTimeout(i._timer),i.config.onClose&&i.config.onClose(i)},resizeUnderlay:function(){var o,s,a=this,l=a.get("id");if(n||7===i&&"BackCompat"===document.compatMode){if(!(o=e.one("#"+l+" ."+t.UNDERLAY_CLASS)))return;s=o.ancestor(),o.setStyles({width:parseFloat(s.getComputedStyle("width"))+12+"px",height:parseFloat(s.getComputedStyle("height"))+12+"px"})}},one:function(t){return e.one("#"+this.get("id")).one(t)},all:function(t){return e.one("#"+this.get("id")).all(t)},showError:function(e){this.one(".body > .error").setHTML(e).show()},clearError:function(){this.one(".body > .error").hide()},showResult:function(t,i){var n={tip:{className:"tip",title:"",extra:""},success:{className:"success",title:"操作成功",extra:""},failure:{className:"failure",title:"操作失败",extra:""}};e.mix(t,n[t.type||"success"]),t.tip?t.tip="<p>"+t.tip+"</p>":(t.tip="",t.className+=" no-tip"),this.setAttrs({width:t.width||"350px",content:e.Lang.sub(i?'<div class="result-box result-box--{className} result-box--alert pngfix"><table class="alert-table"><tr><td width="35"><i class="alert-icon"></i></td><td><div class="alert-msg">{tip}</div></td></tr></table></div>':'<div class="result-box result-box--{className} pngfix"><i></i><h5>{title}</h5>{tip}</div>{extra}',t)})},_setWidth:function(e){return o(e)?e:s(e)?e+"px":"420px"}};e.extend(t,e.Base,r),e.mt.Dialog=t},"1.0.0",{requires:["mt-base","overlay","node","base","mt-uiutil"]});
;M.add("www-dialog",function(e){var t=e.io,n=e.Lang.isFunction,i=e.Lang.trim,o=e.Lang.sub,a=e.mt.util,s=a.Cookie,r=e.mt.www,l=r.REG,c=e.mt.Dialog,u=e.mt.FormChecker;e.namespace("mt.www.Dialog"),r.Dialog=e.merge(r.Dialog,{alert:function(t,n){var i,o=e.mt.Dialog,a=o._instances;"string"==typeof t&&(t={tip:t}),t.id="mt-alert-dialog",t.title=n||"",t.type="tip",e.each(a,function(e){"open"===e._status&&(e._needReopen=!0,e.close())}),i=new o(t),i.open(),i.showResult(t,!0),t.autoHide||i.set("autoHide",t.autoHide),t.reload?i.on("close",function(){window.location.reload()}):i.on("close",function(){e.each(a,function(e){e._needReopen&&(e.open(),delete e._needReopen)})})},login:function(t,i){var o,a;return 1===arguments.length&&n(arguments[0])&&(i=arguments[0],t={}),e.mix(t,{galabel:"common/login",origin:"dialog"}),o=new c({id:"common-login-dialog",title:"登录",width:"440px",content:'<div class="J-content-wrapper" style="height:440px"></div>',useAnim:!0}),o.open(),a=e.one("#common-login-dialog"),a.one("#unitive-login-iframe")||function(n){var o;i?o=i:n.loginRef&&(o=function(e){e.loginRef&&""!==e.loginRef?location.href=e.loginRef:location.reload()}),window._mbq("eventlog","unitivelogin","getjs","www"),e.Get.js("/account/fetchunitiveloginscript",function(){var i,a,s=window.passport;window._mbq("eventlog","unitivelogin","jsloaded","www"),a={ndContentWrapper:n.ndWrapper.getDOMNode(),extraCallback:o},"meituan.com"!==M.DOMAIN_HOST&&(i=2===M.DEV?"http://www."+M.DOMAIN_HOST:M.DOMAIN_HOST,a=e.merge(a,{env:i})),s.init(a),t.plainQueryString?s.login({plainQueryString:t.plainQueryString}):s.login({service:"www","continue":"http://www."+M.DOMAIN_HOST+"/account/settoken",origin:t.origin})})}({ndWrapper:a.one(".J-content-wrapper"),callback:i,loginRef:t.loginRef}),o.setCookie=function(e,t){t=t||s.getExpiresDate(1,0,0),s.set("wwwlr",e,t,"/","."+M.DOMAIN_HOST)},t.loginRef&&o.setCookie(t.loginRef,t.expiresDate),function(){window._gaq&&window._gaq.push(["_trackEvent","Dialog","view",t.galabel])}(),o},Email:{_ID:"email-bind-dialog",tips:{type:"请填写邮箱地址",empty:"请填写邮箱地址",error:"邮箱格式错误，请重新输入"},bind:function(n,i){function o(e){var t=e.get("value");return""===t?p.empty:!l.email.test(t)&&p.error}var s=e.one("#email-bind-dialog-markup");if(s){var d,f=this,p=f.tips,w=r.Dialog.Captcha;d=new c({id:f._ID,width:"470px",title:"绑定邮箱",content:s.getHTML()}),d.open(),function(){function e(e){var t;e.status?(d.after("close",function(){window.location.reload()}),f.activate(e.email,e.url)):(t="captcha"===e.errortype?s.get("fields").captcha:s.get("fields").email,s.setErrorTip(t,e.msg),w.refresh(l))}var s,l=d.one("form"),c=a.field(l,"email"),g=a.field(l,"captcha");w.bindRefreshEvent(l),s=new u({form:l,fields:{email:{node:c,validateFn:o,typeTip:p.type},captcha:{node:g,validateFn:w.check,typeTip:w.tips.type}},tipClass:u.CLASS_BLOCK_TIP}),l.on("submit",function(o){o.halt();var s;s=n?"/account/bindemail/modify"+(i?"/verified":""):"/account/bindemail",t(s,{method:"POST",form:{id:l},on:{success:function(t,n){e(a.getEvalRes(n))},failure:function(){var e={type:"failure",tip:"请求失败，请稍候重试",autoHide:3,reload:!0};r.Dialog.showResult(d,e)}}})})}()}},activate:function(t,n){var i=e.one("#email-activate-dialog-markup");if(i){var a,s=this;a=new c({id:s._ID,width:"470px",title:"绑定邮箱",content:o(i.getHTML(),{email:t,url:n})}),a.open()}}},Password:{tips:{thesamepwd:"当前密码和新密码一致，请重新输入",currentpwd:"请输入当前密码",emptypwd:"请输入新密码",whitespace:"密码中不能包含空格",password:"建议使用与您其它账户不同的密码",emptypwd2:"请再次输入新密码",password2:"请再次输入密码以确认",notequal:"密码不一致，请重新输入"},set:function(e){this._set(e)},reset:function(e){this._set(e,!0)},_set:function(n,i){var s,l,d,f,p,w,g,m,h=null,v=this,b=e.one("#J-set-password-dialog-markup"),y={tip:"",currentPasswordField:"",mobileField:""};n=n||{},e.mix(y,n,!0,["tip"]),i?(y.action="/account/settings",y.currentPasswordField='<div class="field-group"><label>当前密码</label><input type="password" name="currentpassword" id="current-password" class="f-text" autocomplete="off" /></div>'):(y.action="/account/addpassword",n.mobile&&(y.mobileField=o('<div class="field-group"><label class="text">手机号</label>{mobile}</div>',{mobile:n.mobile}))),h=new c({id:"set-password-dialog",width:"400px",title:"设置密码",content:o(b.getHTML(),y)}),h.open(),function(){function o(e){w.setHTML(e).show(),r.disableButton(p,!1)}s=h.one("form"),l=a.field(s,"currentpassword"),d=a.field(s,"password"),f=a.field(s,"password2"),p=a.field(s,"commit"),w=s.one(".error"),e.use("www-passwordstrength",function(){d.on("keyup",function(){r.PasswordStrength.check(d.get("value"))})}),g=new u({form:s,fields:{},tipClass:u.CLASS_BLOCK_TIP,async:!0}),i&&g.addField("currentPassword",{node:l,validateFn:v.getCheckMethod(g,0)}),g.addFields({password:{node:d,validateFn:v.getCheckMethod(g,1),typeTip:v.tips.password},password2:{node:f,validateFn:v.getCheckMethod(g,2)}}),g.on("submitSuccess",function(e){e.halt(),r.disableButton(p),m&&m.isInProgress()||(m=t(s.get("action"),{method:"POST",form:{id:s},on:{success:function(e,t){var i,s=a.getEvalRes(t);s.status?(i={type:"success",title:"设置成功！"},s.growth&&s.growth>0&&(i.tip='您已获得<span class="growth-dialog-focus">'+parseInt(s.growth,10)+"个成长值</span>"),h.showResult(i),h.on("close",function(){n.reload?window.location.reload():s.redirect&&(window.location.href=s.redirect)}),h.set("autoHide",3)):o(s.msg)},failure:function(){o("网络故障，请稍后重试")}}}))})}()},getCheckMethod:function(e,t){function n(e,t){var n=t||"",i=/\s/,a=/^[\x21-\x7e]{6,32}$/i;switch(n){case"current":if(""===e)return o.currentpwd;break;case"password":if(""===e)return o.emptypwd;if(i.test(e))return o.whitespace;if(!a.test(e))return o.password;break;case"password2":if(""===e)return o.emptypwd2}return!1}var i=e.get("fields"),o=this.tips;switch(t){case 0:return function(e){return n(e.get("value"),"current")};case 1:return function(t){var a,s,r=t.get("value");return!1!==(s=n(r,"password"))?s:i.currentPassword&&i.currentPassword.node.get("value")===r?o.thesamepwd:(a=i.password2.node.get("value"),a&&!1===n(a,"password2")&&e.checkField(i.password2),!1)};case 2:return function(e){var t,a=e.get("value");return!1!==(t=n(a,"password2"))?t:i.password.node.get("value")!==a&&o.notequal};default:return function(){return!1}}}},Mobile:{bind:function(t,n){var i,o=null;if(!t){if(!(i=e.one("#mobile-bind-dialog-markup")))return;t=i.getHTML()}o=new c({id:"mobile-bind-dialog",width:"450px",title:"绑定手机号码",content:t}),o.open(),n?this.initSmsUpBind(o.one("form"),{dialog:o}):this.initBinder(o)},initBinder:function(e){function n(e){var t=i(e.get("value"));return""===t?"手机号不能为空":!l.mobile.test(t)&&"请输入正确的11位手机号"}function o(e){return""===e?"图片验证码不能为空":4!==e.length&&"请填入正确的图片验证码"}function s(e){return""===i(e.get("value"))&&"动态码不能为空"}function c(e){if(!e)return void k.setHTML("").hide();e='<i class="tip-status tip-status--opinfo"></i>'+e,k.setHTML(e).show()}function d(t){e.after("close",function(){window.location.reload()});var n={};n.type="success",n.tip=t.msg,t.growth&&t.growth>0&&(n.tip='您已获得<span class="growth-dialog-focus">'+parseInt(t.growth,10)+"个成长值</span>"),n.autoHide=2,r.Dialog.showResult(e,n)}function f(e){c(e.msg),1===e.errType&&(r.disableButton(h),r.disableButton(T)),T.set("value","登录")}var p,w,g=e.one("form"),m=a.field(g,"mobile"),h=a.field(g,"verifycode"),v=g.one("#mobile-verify"),b=g.one(".form-field--captcha"),y=a.field(g,"captcha"),k=g.one("#validate-info"),T=g.one("#J-bind-btn"),M=!1,D="",S=!1,C=new u({form:g,fields:{mobile:{node:m,validateFn:n,typeTip:""},verifyCode:{node:h,validateFn:s,typeTip:""}},tipClass:u.CLASS_INLINE_TIP,checkEvent:"blur",showOkTip:!1,async:!0});p=r.refreshCaptcha(g,!0,"captcha"),m.on("keyup",function(){var e=i(m.get("value"));""!==D&&11===e.length&&D!==e&&(M=!1,b.hide(),c(!1),v.set("value","获取动态码"),r.disableButton(v,!1))}),function(){function e(i){w&&w.isInProgress()||(w=t("/account/bindsendnew",{method:"POST",data:a.toPostData(i),on:{success:function(t,o){var l=a.getEvalRes(o);l.data&&l.data.needconfirm?window.confirm(l.msg)&&(i.confirm=!0,e(i)):l.status?(r.disableButton(h,!1),r.disableButton(T,!1),n()):s(l,i.mobileNum)},failure:function(){c("网络有问题，请稍后重试。")}}}))}function n(){var e,t=60;S=!0,c(!1),M&&(b.hide(),M=!1),r.disableButton(v),e=window.setInterval(function(){t-=1,t?v.set("value","已发送，"+t+"秒后可重新获取"):(window.clearInterval(e),v.set("value","重新获取"),r.disableButton(v,!1))},1e3)}function s(e,t){if(c(e.msg),S=!1,e.errType)switch(e.errType){case 2:D=t,b.hide(),r.disableButton(v);break;case 3:M=!0,p.update(),b.show(),y.focus()}}var l,d,f,g=C.get("fields").mobile;v.on("click",function(){if(C.checkField(g),g.status===u.STATUS_OK){if(d=i(m.get("value")),f=i(y.get("value")),!M)return void e({mobile:d});l=o(f),l?(b.addClass("form-field--error"),c(l)):e({mobile:d,captcha:f})}})}(),C.on("submitSuccess",function(e){if(e.halt(),!S)return void c("请先获取手机动态码");w&&w.isInProgress()||(T.set("value","登录中..."),w=t(g.get("action"),{method:"POST",form:{id:g},on:{success:function(e,t){var n=a.getEvalRes(t);n.status?d(n):f(n)},failure:function(){c("网络有问题，请稍后重试。")}}}))})},initSmsUpBind:function(n,i){function o(t,n){var o=a.getEvalRes(n),l=e.one("#J-upstream-sms-content"),c=e.one("#J-upstream-sms-receiver");o.status?(m.hide(),h.show(),g.setHTML(o.maskmobile),l.setHTML(o.verifycode),c.setHTML(o.damobile),e.mt.www.Dialog.Mobile.initSmsUpChecker(v,e.merge({successFn:s,failFn:r,failMsg:"您发送的短信暂时无法收到，建议您咨询客服解决",type:"绑定"},i))):b({tip:o.msg,reload:!0})}function s(e){y=p;var t="绑定成功";e.growth&&e.growth>0&&(t='您已获得<span class="growth-dialog-focus">'+parseInt(e.growth,10)+"个成长值</span>"),b({tip:t,reload:!0,autoHide:5})}function r(){y=f}function l(){var e=c.get("value");return""===e?"请输入手机号":/^\d{11}$/.test(e)?(y=d,!1):"请输入正确的11位手机号码"}var c=e.one("#J-smsup-bind-input");if(c){var u,d=2,f=3,p=4,w=e.one("#J-smsup-bind-next"),g=e.one("#J-smsup-bind-mask"),m=e.one("#J-smsup-bind-step1"),h=e.one("#J-smsup-bind-step2"),v=e.one("#J-smsup-bind-check"),b="undefined"!=typeof e.mt.www.Dialog.alert?e.mt.www.Dialog.alert:window.alert,y=1;i=i||{},n&&n.on("submit",function(e){switch(l(),y){case p:return!0;case 1:b("请输入正确的手机号");break;case f:case d:b("您尚未完成手机号码绑定")}return e.halt(),!1}),w.on("click",function(e){if(e.halt(),!u||!u.isInProgress()){var n=l();if(n)return b(n);u=t(w.getData("action"),{method:"POST",data:a.toPostData({mobile:c.get("value")}),on:{success:o}})}})}},initSmsUpRebind:function(n,i){function o(t,n){var o=a.getEvalRes(n),l=e.one("#J-upstream-sms-content"),c=e.one("#J-upstream-sms-receiver");o.status?(h.hide(),v.show(),m.setHTML(o.maskmobile),l.setHTML(o.verifycode),c.setHTML(o.damobile),e.mt.www.Dialog.Mobile.initSmsUpChecker(b,e.merge({successFn:s,failFn:r,failMsg:"您发送的短信暂时无法收到，建议您咨询客服解决",type:"绑定"},i))):y({tip:o.msg,reload:!0})}function s(e){k=w;var t="绑定成功";e.growth&&e.growth>0&&(t='您已获得<span class="growth-dialog-focus">'+parseInt(e.growth,10)+"个成长值</span>"),y({tip:t,reload:!0,autoHide:5})}function r(){k=p}function l(){var e=c.get("value"),t=u.get("value");return""===t?"请输入原手机号":""===e?"请输入新手机号":/^\d{11}$/.test(e)&&/^\d{11}$/.test(t)?t===e?"新手机号不能和原手机号相同":(k=f,!1):"请输入正确的11位手机号码"}var c=e.one("#J-smsup-bind-input"),u=e.one("#J-smsup-bind-input-old");if(c&&u){var d,f=2,p=3,w=4,g=e.one("#J-smsup-bind-next"),m=e.one("#J-smsup-bind-mask"),h=e.one("#J-smsup-bind-step1"),v=e.one("#J-smsup-bind-step2"),b=e.one("#J-smsup-bind-check"),y="undefined"!=typeof e.mt.www.Dialog.alert?e.mt.www.Dialog.alert:window.alert,k=1;i=i||{},n&&n.on("submit",function(e){switch(l(),k){case w:return!0;case 1:y("请输入正确的手机号");break;case p:case f:y("您尚未完成手机号码绑定")}return e.halt(),!1}),g.on("click",function(e){if(e.halt(),!d||!d.isInProgress()){var n=l();if(n)return y(n);d=t(g.getData("action"),{method:"POST",data:a.toPostData({mobile:c.get("value"),oldmobile:u.get("value")}),on:{success:o}})}})}},initSmsUpChecker:function(n,i){function o(){!h&&p?(p%f==0&&r(),n.set("value","系统将在("+p+"秒)内完成"+u)):(window.clearInterval(l),h||r(s)),p-=1}function s(){h||(w(i.failMsg),p=d,n.set("value",u+"失败，请重发短信后再次确认").set("disabled",!1).removeClass(g))}function r(e){c=t(m,{method:"POST",data:a.toPostData(i.data),on:{success:function(t,n){var o=a.getEvalRes(n);o.status=parseInt(o.status,10),0===o.status?(h=!0,i.successFn&&i.successFn(o)):1===o.status?w({tip:o.msg,reload:!0}):(h=!1,i.failFn&&i.failFn(o)),e&&e(o)},failure:function(){w("网络异常，请重试"),n.set("disabled",!1).removeClass(g)}}})}if(n=e.one(n)){var l,c,u,d=60,f=10,p=d,w="undefined"!=typeof e.mt.www.Dialog.alert?e.mt.www.Dialog.alert:window.alert,g="btn-disabled",m=n.getData("action"),h=!1,v={successFn:function(){},failFn:function(){},type:"注册",failMsg:""};i=e.merge(v,i),u=i.type,n.on("click",function(){n.addClass(g).set("disabled",!0).set("value","系统将在("+p+")内完成"+u),o(),l=window.setInterval(o,1e3)}),i.dialog&&i.dialog.on&&i.dialog.on("close",function(){l&&window.clearInterval(l)})}},_performVerify:function(e){if(e.ndForm){var n=e.config||{},i=e.ndForm.one('input[type="submit"]'),o=e.ndVerifyMsg||null;r.disableButton(i,!0),o&&(o.removeClass("error"),o.setHTML("")),t(e.ndForm.get("action"),{method:"POST",form:{id:e.ndForm},on:{success:function(t,s){var l,c=a.getEvalRes(s);c.status?e.callback?e.callback(c):(n.type=c.status?"success":"failure",l=c.msg,c.growth&&c.growth>0&&(l='您已获得<span class="growth-dialog-focus">'+parseInt(c.growth,10)+"个成长值</span>"),n.tip=l,n.autoHide=2,r.Dialog.showResult(e.dialog,n)):(r.disableButton(i,!1),o?(o.addClass("error"),o.setHTML(c.msg)):r.Dialog.alert(c.msg))},failure:function(){r.disableButton(i,!1)}}})}},_check:function(e){return!/^\d{11}$/.test(e.get("value"))&&"请输入正确的11位手机号码"}},Captcha:{tips:{type:"请输入图片中的字符，不区分大小写",empty:"请输入验证码",error:"验证码输入错误，请重新输入"},bindRefreshEvent:function(e){if(e){var t=e.one(".captcha-refresh"),n=e.one(".signup-captcha-img"),i=this;t&&n&&e.delegate("click",function(t){t.halt(),i.refresh(e)},".signup-captcha-img, .captcha-refresh")}},refresh:function(e){var t=e.one(".signup-captcha-img"),n=t.getAttribute("src").replace(/(\?0\.\d+)?$/,"");t.setAttribute("src",n+"?"+Math.random())},check:function(e){var t=e.get("value"),n=r.Dialog.Captcha.tips;return""===t?n.empty:4!==t.length&&n.error}},showResult:function(e,t){t=t||{},t.title||(t.title="success"===t.type?"操作成功":"操作失败"),e.showResult(t),t.autoHide!==undefined&&e.set("autoHide",t.autoHide),t.reload&&e.after("close",function(){window.location.reload()}),t.onClose&&e.after("close",function(){t.onClose(e)})},createResultDialog:function(e,t,n){n=n||"MT_SHOW_RESULT_DIALOG";var i=new c({id:n,title:t||""});i.open(),this.showResult(i,e)}})},"1.0.0",{requires:["www-base","mt-formchecker","mt-dialog"]});
;M.add("www-ratelist",function(i){var e={buildSingleRatePicItem:function(i){var e,t,a,r;if(!i)return"";if(!(r=i.length))return"";for(a='<div class="pic-list J-piclist-wrapper"><div class="J-pic-thumbnails pic-thumbnails"><ul class="pic-thumbnail-list">',e=0;e<r;e++)t=i[e],a+='<li data-src="'+t.url+'"><a class="pic-thumbnail" href="#" hidefocus="true">    <img src="'+t.url.replace("/w.h/","/126.126/")+'"/></a></li>';return a+='</ul></div><div class="J-pic-preview pic-preview"></div></div>'},renderRatePicList:function(e){if(e){var t=e.all(".J-piclist-wrapper");t.isEmpty()||i.use("w-carousel",function(i){t.each(function(e){new i.mt.widget.Carousel({contentBox:e,ndCarousel:".J-pic-preview",ndIndicatorWrap:".J-pic-thumbnails",fillLastPage:!0,getCarouselSrc:function(i){return i.getData("src").replace("/w.h/","/668.500/")}}).render()})})}}};i.namespace("mt.www.Ratelist"),i.mt.www.Ratelist=e},"1.0.0",{requires:["www-base"]});
;M.add("www-sku",function(e){e.namespace("mt.www.Sku"),e.mt.www.Sku={initTypeSelection:function(e){var t,o,n,l,s;e.delegate("click",function(){var a=e.one(".J-cart-quantity"),i=a.getData("max")-0;if(o=e.one(".J-type-selected"),this.hasClass("J-type-selected")||(this.addClass("J-type-selected"),e.one(".J-dealgood-id").set("value",this.getAttribute("data-dealgoodsid"))),o&&(o.removeClass("J-type-selected"),e.one(".J-dealgood-id").set("value","0")),o=e.one(".J-type-selected"),n=e.one(".J-buy-form"),l=n.hasClass("deal-select-incomplete"),l?o&&(n.removeClass("deal-select-incomplete"),e.one(".J-remind-continue").show(),e.one(".remind__bottom").hide()):o||(n.addClass("deal-select-incomplete"),e.one(".J-remind-continue").hide(),e.one(".remind__bottom").show()),s=e.one(".deal-component-quantity-warning"),t=a.get("value")-0,s.setHTML(""),e.one(".J-type-selected")){var d=e.one(".J-type-selected").getData("dealgoodsrest");t>d&&d<i&&s.setHTML("还剩 "+d+"单")}},".J-type-select a")},initRemindClose:function(e){var t;e.delegate("click",function(){t=e.one(".J-buy-form"),t.removeClass("deal-buy-select-remind"),t.one(".J-type-remind").hide(),e.one(".deal-component-purchase-button").show()},".J-remind-close")},initNeedSelect:function(t,o,n){var l=e.one(".J-remind-continue"),s=t.currentTarget.cloneNode(!0);"INPUT"===s.get("tagName")?s.set("value","确定"):"A"===s.get("tagName")&&s.set("innerHTML","确定"),s.setAttribute("class",n+" btn J-select-continue"),s.removeAttribute("id"),l.setHTML(s);var a;o.one(".J-type-showall")&&""!==o.one(".J-type-showall").get("innerHTML")&&(o.one(".J-type-list").removeClass("type-list--fold"),o.one(".J-type-list").addClass("type-list--all"),a=parseInt(o.one(".J-type-list").get("scrollHeight"),10),a>184&&o.one(".J-type-select").addClass("type-showall-color-gradient"),o.one(".J-type-showall").remove(!0)),o.one(".J-buy-form").addClass("deal-buy-select-remind"),t.currentTarget.hasClass(n)||o.one(".J-select-continue").addClass(n),o.one(".deal-component-purchase-button").hide(),o.one(".J-type-remind").show();var i,d=e.UA.webkit?document.body:document.documentElement,c=e.one(".deal-component-container").getY();e.UA.ie&&e.UA.ie<9?window.scrollTo(0,c):(i=new e.Anim({node:d,duration:1,to:{scroll:[0,c]},easing:"easeOutStrong"}),i.run())},initTypeSelectAll:function(e){var t,o,n;for(t=e.all(".J-type-showall"),o=t.size(),n=0;n<o;++n)!function(t){var o,n;t&&(o=t.ancestor().one(".J-type-list"))&&((n=parseInt(o.get("scrollHeight"),10))<=92||(t.setHTML('全部<i class="fold-tri fold-tri--down"></i>'),t.on("click",function(l){l.halt(),o.removeClass("type-list--fold"),o.addClass("type-list--all"),n=parseInt(o.get("scrollHeight"),10),n>184&&e.one(".J-type-select").addClass("type-showall-color-gradient"),t.remove(!0)})))}(t.item(n))}}},"1.0.0");
;M.add("www-add-cart",function(e){var t=e.io,a=e.mt.util;e.mt.www.AddCart={init:function(n,i,o){e.use("www-dialog","www-tracker",function(e){function r(t){var a;if(!0===o)return void(window.location.href="/cart/");if((a=t.recommendResult)===undefined)u.createResultDialog({type:"success",title:"成功加入购物车！",tip:t.msg||"",extra:f},"",v),p.updateDropdownList();else{var n,i=e.one("#addcart-recdeal-markup");n=new w({id:"cart-result-deals-dialog",width:"590px",height:"360px",content:e.Lang.sub(i.getHTML(),{title:"成功加入购物车！",tip:t.msg||"",operate:f,deals:a})}),p.updateDropdownList(),n.open()}}function c(e){e=e||{},u.createResultDialog({type:"failure",title:"添加失败！",tip:e.msg||"",extra:m},"",v)}function d(){u.createResultDialog({type:"failure",title:"添加失败！",tip:"网络繁忙，请稍后再试。"},"",v)}var l,s=e.mt.www,u=s.Dialog,w=e.mt.Dialog,p=s.CartEx,g='<a href="javascript:void(0);" gaevent="content/main/addtocart/continue" class="close btn btn-cart btn-cart--left">&laquo;继续浏览</a>',f='<div class="operate">'+g+'<a href="/cart" gaevent="content/main/addtocart/cartcheckout" class="btn btn-hot btn-cart">去购物车结算&raquo;</a></div>',m='<div class="operate">'+g+'<a href="/cart" class="btn btn-hot btn-cart">整理购物车&raquo;</a></div>',v="cart-result-dialog";e.one("body").delegate("click",function(o){o.preventDefault();var u=a.data(o.currentTarget,"dealid"),w=a.data(o.currentTarget,"cityid"),p=e.one(".J-price-selection-container"),g=e.one(".J-price-id-input"),f=g?g.get("value"):0,m=0,v=1;if(i){var b=e.one(i);b&&(v=parseInt(b.get("value"),10)||1)}if(p){var h,D=!1,k=e.one(".deal-component-container").getY(),y=e.UA.webkit?document.body:document.documentElement;if(p.all(".J-price-selection").each(function(e){e.hasClass("deal-detail-selection-item--current")&&(D=!0,f=e.getData("priceid"))}),!D)return void(e.UA.ie&&e.UA.ie<9?(window.scrollTo(0,k),p.one(".price-selection").addClass("price-selection--confirm")):(h=new e.Anim({node:y,duration:1,to:{scroll:[0,k]},easing:"easeOutStrong"}),h.on("end",function(){p.one(".price-selection").addClass("price-selection--confirm")}),h.run()))}if(e.one(".deal-select-incomplete"))return void s.Sku.initNeedSelect(o,e.one(".deal-component-container"),n.substr(1));e.one(".J-type-selected")&&(m=e.one(".J-type-selected").getData("dealgoodsid"));var T="/cart/add/"+u+"/"+w;T=e.mt.www.tracker.appendTrackingParams(T),l&&l.isInProgress()&&l.abort(),l=t(T,{method:"POST",data:a.toPostData({quantity:v,calendarid:f,dealgoodsid:m}),on:{success:function(e,t){var n=a.getEvalRes(t);n.status?r(n):c(n)},failure:function(){d()}}})},n)})}}},"1.0.0",{requires:["www-base","www-dialog","www-tracker","www-sku"]});
;M.add("www-deal",function(e){var t=e.io,n=e.UA.ie,i=6===n,a=e.Lang.isArray,o=e.Lang.trim,l=e.mt.util,r=e.mt.www,c=e.mt.www.tracker,d=e.mt.Dialog,s=e.mt.www.Ratelist;e.namespace("mt.www.Deal"),e.mt.www.Deal={refresh:function(t){function n(e,t){if(e<1)return void window.location.reload();var i=t&&t.one("span"),a=parseInt(e/86400,10),o=parseInt(e/3600%24,10),l=parseInt(e/60%60,10),r=parseInt(e%60,10),c=[];!i||a>0||(o>0?(c.push("<strong>"+o+"</strong>小时"),c.push("<strong>"+l+"</strong>分"),c.push("<strong>"+r+"</strong>秒")):l>0?(c.push("<strong>"+l+"</strong>分"),c.push("<strong>"+r+"</strong>秒")):c.push("<strong>"+r+"</strong>秒"),i.setHTML(c.join("")),e--,window.setTimeout(function(){n(e,t)},1e3))}t=a(t)?t:[t],e.Array.each(t,function(t){var i=e.one("#deal-timeleft-"+t);i&&i.hasClass("deal-on")&&n(i.getAttribute("diff"),i)})},Tracker:{init:function(){r.trackPageScroll("deal/scroll")}},SideTopic:{init:function(){M.load(function(){e.use("w-slider",function(e){new e.mt.widget.Slider({srcNode:"#J-side-topic",effect:"slideFadeIn",sheetContainer:".J-side-topic-list",previous:".side-box--topic--previous",next:".side-box--topic--next",width:239,interval:2e3}).render()})})}},NavBuyBtn:{update:function(t,n){if(n&&t){var i=e.one(document.createDocumentFragment());i.appendChild(n),t.setHTML(i.get("firstChild").get("innerHTML")),i=null}}},BottomBuyBtn:{update:function(e,t){t&&e&&e.setHTML(t)}},MyReview:{update:function(t,n){var i=e.JSON.parse(n);if(i.blkMyReview&&t){t.append(i.blkMyReview);var a,o,l=e.one(".to-rate"),r="";l&&l.hide(),i.picinfo&&(r=e.Node.create(s.buildSingleRatePicItem(i.picinfo)),a=e.one(".J-myreview"),o=a.one(".J-normal-view"),o.appendChild(r),s.renderRatePicList(a))}}},UserReviews:{update:function(t,n){var i=e.JSON.parse(n);if(i.showFeedback&&t){e.mt.www.Deal.initUserReviews({dealId:i.dealid,cityId:i.cityid,isLogin:i.isLogin,loginRef:i.loginRefForFeedback})}}},MovieSchedule:{update:function(t,n){if(n&&t){var i=e.one(document.createDocumentFragment());i.appendChild(n),t.setHTML(i.get("firstChild").get("innerHTML")),i=null;var a=e.mt.www.Deal;e.mt.www.ImageLazyLoader.init("#movie-schedule"),a.initMovieInfo("#movie-schedule")}}},initDynamicInfo:function(n){function i(t){var n=e.one("#bd");if(t.getStatusTip&&n&&M.load(function(){e.use("www-tips",function(e){e.mt.www.SysMsg.init(t.getStatusTip,"#bd")})}),t.blkDirectedUserDialog||t.blkPC2MobileDialog||t.blkMagiccard181Dialog||t.campaignMagiccardDialog){var i=e.Node.create("<div></div>"),a={id:"welcome-dialog",width:380};if(t.blkMagiccard181Dialog)i.setHTML(t.blkMagiccard181Dialog);else if(t.blkPC2MobileDialog)i.setHTML(t.blkPC2MobileDialog);else if(t.blkDirectedUserDialog){var o,l,c=e.Node.create("<div></div>"),s={width:380};c.setHTML(t.blkDirectedUserDialog),n.append(c),o=e.one("#directedUser-dialog-markup"),s.content=o.getHTML(),l=new d(s),l.open()}else if(t.campaignMagiccardDialog){var u,g,f=e.Node.create("<div></div>"),p={width:380};f.setHTML(t.campaignMagiccardDialog),n.append(f),u=e.one("#campaignEvent-dialog-markup"),p.content=u.getHTML(),g=new d(p),g.open()}n.append(i);var h=e.one("#welcome-dialog-markup"),w=document.location.search;if(h&&w.indexOf("urpid=tenpay%7C_%7C")<0){a.content=h.getHTML();new d(a).open()}}t.blkPC2MobileTip&&n.prepend(t.blkPC2MobileTip),r.selectAndCopy("#share-copy-text","#share-copy-button")}var a=n.action,o=n.method||"GET",c=n.cb||null,s="referrer"in document?document.referrer:window.location.href;-1===a.indexOf("?")&&window.location.search&&(a+=window.location.search),s&&(a+=(-1===a.indexOf("?")?"?":"&")+"__referer="+encodeURIComponent(s));var u=e.Lang.now();t(a,{method:o,on:{success:function(e,t){var n=l.getEvalRes(t);r.trackApiTiming(n.bem||null,u,"deal-dynamic"),c?c.call(null,t.responseText):n.status&&i(n.data)}}})},initReferralLotteryDialog:function(){function t(){if(n)n.open();else{var t=e.one("#referral-lottery-dialog-markup");n=new d({id:i,title:"本单说明",width:"580px",content:t.getHTML()}),n.open(),e.one("#"+i+" .J-view-detail").on("click",function(){n.close(),window.location.href=o})}}var n,i="referral-lottery-dialog",a=e.one("#referral-lottery-link"),o=e.one("#anchor-referral-lottery")?"#anchor-referral-lottery":"#anchor-detail";a&&a.on("click",function(){t()})},addFavorite:function(t,n){function i(){g&&g.isInProgress()||(g=e.io("/collection/add/"+t,{method:"POST",data:{url:v},on:{success:function(e,t){var n=l.getEvalRes(t);2===n.status?c():1===n.status?o():0===n.status?(r.Dialog.alert(n.msg),a()):r.Dialog.alert("网络有问题，请稍后重试")},failure:function(){}}}))}function a(){if(s){s.replaceClass(n,"in-favorite"),s.setAttribute("title","您已经收藏过本单");var e=s.one(".J-fav-count");if(e){var t=0|e.getHTML();e.setHTML(t+1),e.addClass("orange"),s.one("span").addClass("finish")}}}function o(){s&&(a(),e.use("w-simpledialog",function(){new e.mt.widget.SimpleDialog({id:"add-favorite-dialog",node:s,width:160,content:e.one("#J-favorite-dialog").getHTML(),location:"tl",autoHide:2e3}).open()}))}function c(){e.use("www-dialog",function(){u?u.open():u=r.Dialog.login({origin:"deal-favorite",galabel:"deal/favorite/login"})})}function d(){var e=l.Cookie.getExpiresDate(1,0,0);l.Cookie.set(w,t,e,"/","."+M.DOMAIN_HOST)}n=n||"add-favorite";var s,u,g,f,p,h,w="addfav",m=e.one("."+n),v=location.href;m&&(p=m.getData("login"),h="false"!==p,f=parseInt(l.Cookie.get(w),10),t=parseInt(t,10),h&&f===t?(!function(){l.Cookie.remove(w,"/","."+M.DOMAIN_HOST)}(),i()):e.one("body").delegate("click",function(e){s=e.currentTarget,e.preventDefault(),h?i():(d(),c())},"."+n))},handleWeddingContactSubmission:function(n){function i(){var i=e.one("#deal-weddingPhone-markup"),a="";if(!i)return a;var o=i.getHTML();return t("/deal/mobilecontact/"+n,{method:"GET",sync:!0,on:{success:function(t,n){var i=l.getEvalRes(n),r=l.decodeJSON(i.mobile);null===r&&(r=""),a=e.Lang.sub(o,{mobile:r})},failure:function(){}}}),a}var a;e.one("body").delegate("click",function(t){t.halt();var n=e.one(".J-error-wedding");n&&"none"!==n.getStyle("display")&&n.setStyle("display","none");var o=i(),l=t.target;e.use("w-bubbletip",function(e){a||(a=new e.mt.widget.BubbleTip({node:l,id:"wdBubbleTip",alignment:"bottom",showClose:!0,forceClose:!0,showType:"click",tip:o})),a.render(),a.show()})},".J-component-contact-phone-service")},initMobileOnlyDialog:function(){function n(){if(g)g.open();else{var t=e.one("#download-cli-dialog-markup"),n=t.getAttribute("isseckill")?"520px":"820px";g=new d({id:w,title:"扫描二维码，立即去抢购",width:n,content:t.getHTML()}),f=g.one("form"),h=l.field(f,"mobile"),p=l.field(f,"captcha"),f&&i(),g.open()}}function i(){e.use("mt-formchecker",function(e){var n,i=e.mt.FormChecker,o=f.get("action");h.plug(e.mt.plugin.Placeholder),r.refreshCaptcha(f,!0),new i({form:f,fields:{mobile:{node:h,validateFn:c,typeTip:"填写手机号，下载地址将发送到您的手机上"},captcha:{node:p,validateFn:s}},tipClass:i.CLASS_BLOCK_TIP}),f.on("submit",function(e){e.halt(),n&&n.isInProgress()||(n=t(o,{method:"POST",form:{id:f},on:{success:function(e,t){var n=l.getEvalRes(t);n.status?a(!0):a(!1,n.msg)},failure:function(){}}}))})})}function a(e,t){var n;n=e?{type:"success",title:"短信发送成功！",tip:"短信可能有延迟，请耐心等待"}:{type:"failure",title:"短信发送失败！",tip:t},g.showResult(n),g.set("autoHide",5),g=null}function c(){var e=h.get("value"),t=/^0{0,1}(13[0-9]|15[0-9]|18[0-9])[0-9]{8}$/;return 0===e.length?"手机号不能为空":!t.test(e)&&"请输入11位手机号码"}function s(){var e=o(p.get("value")).length;return 0===e?"验证码不能为空":4!==e&&"请输入正确的验证码"}var u=e.one(".deal-buy--mobileonly");if(u&&!+u.getData("hasinit")){u.setData("hasinit",1),u.get("disabled")&&u.set("disabled",!1);var g,f,p,h,w="download-cli-dialog";u&&u.on("click",function(e){e.preventDefault(),n()})}},initDetailNavbar:function(t){function n(){var e=w.get("pageYOffset"),n=t.one(".buy-group"),o=e<y?"up":"down";y=e,"up"===o?e<d.getY()?(n&&n.hide(),t.removeClass(m),u.hide(),i&&t.setStyle("top","auto")):i&&t.setStyle("top",e):e>d.getY()&&(t.addClass(m),n&&n.show(),t.next("."+b)?u.show():t.insert(u,"after"),i&&t.setStyle("top",e)),a()}function a(){function e(){g.each(function(e){e.ancestor("li").removeClass(v)}),g.filter('[data-anchor="'+k[i][0]+'"]').item(0).ancestor("li").addClass(v)}for(var n=0,i=0,a=t.getY()+h;n<k.length;){if(p&&a>=p)g.each(function(e){e.ancestor("li").removeClass(v)});else{if(!(a>=k[n][1])){e();break}i=n,n===k.length-1&&e()}n++}}function o(){var t=[];g.each(function(n){var i=n.getData("anchor"),a=e.one(i),o=[];a&&(o[0]=i,o[1]=a.getY(),t.push(o))}),p=f.get("region").bottom,k=t}function l(t){var n,i,a,o,l,d,s,u,g=e.UA.webkit?document.body:document.documentElement,f=e.one(t),p=e.one(".J-cart-quantity"),h=e.one(".J-price-id-input"),w=!1,m=h?h.get("value"):0;f&&f.delegate("click",function(t){if(t.halt(),a=e.one(".J-price-selection-container"),n=e.one(".J-type-selected"),i=e.one(".deal-select-incomplete"),o=e.one(".deal-component-container").getY(),d=this.get("href"),s=p?"?q="+p.get("value"):"?q=1",i)return r.Sku.initNeedSelect(t,e.one(".deal-component-container"),"J-buy"),void(e.UA.ie&&e.UA.ie<9?window.scrollTo(0,o):(u=new e.Anim({node:g,duration:1,to:{scroll:[0,o]},easing:"easeOutStrong"}),u.run()));n&&(s+="&dealgoodsid="+n.getAttribute("data-dealgoodsid")),a?(l=a.all(".J-price-selection"),l.each(function(e){e.hasClass("deal-detail-selection-item--current")&&(w=!0,m=e.getData("priceid"))}),w?(s+="&calendarid="+m,window.location.href=c.appendTrackingParams(d+s)):e.UA.ie&&e.UA.ie<9?(window.scrollTo(0,o),a.one(".price-selection").addClass("price-selection--confirm")):(u=new e.Anim({node:g,duration:1,to:{scroll:[0,o]},easing:"easeOutStrong"}),u.on("end",function(){a.one(".price-selection").addClass("price-selection--confirm")}),u.run())):(0!==m&&(s+="&calendarid="+m),window.location.href=c.appendTrackingParams(d+s))},".J-buy")}var d,s,u,g,f,p,h,w=M.window,m="common-fixed",v="content-navbar__item--current",b="common-fix-placeholder",y=0,k=[];(t=e.one(t))&&!i&&(g=t.all("[data-anchor]"),0!==g.size()&&(h=t.get("offsetHeight")+10+5,f=e.one(g.item(g.size()-1).getData("anchor")),d=t.ancestor(),s=parseInt(t.getComputedStyle("height"),10),u=e.Node.create('<div class="'+b+'" style="height:'+s+'px;"></div>'),e.Global.on("PageHeight:change",function(){o(),a()}),e.all("#deal-stuff img").each(function(e){e.getAttribute("height")||e.on("load",function(){o(),a()})}),l(".deal-component-container"),l(t),l("#J-bottom-buy"),o(),w.scroll(n,12)))},initMovieInfo:function(n){var i=e.one(n);if(i){var a,o=i.one(".accordion-content");o&&o.plug(e.mt.plugin.Effect),i.delegate("click",function(){var n=this.ancestor(".accordion-tab"),o=n.one(".accordion-content"),r=i.one(".biz-link"),c=l.data(n,"id"),d=r.getAttribute("href").replace(/\d+#/,c+"#");o?("none"===o.getStyle("display")?o.effect.slideDown():o.effect.slideUp(),n.toggleClass("accordion-tab-selected")):(n.append('<div class="accordion-content" style="display:none;"><a gaevent="dealmovie/movieshop" class="biz-link" href="'+d+'" target="_blank">查看详细排片表 &raquo;</a></div>'),o=n.one(".accordion-content"),o.plug(e.mt.plugin.Effect),a&&a.isInProgress()&&a.abort(),a=t("/deal/movieshows/"+c,{method:"GET",on:{success:function(e,t){var i=l.getEvalRes(t),a=i.data;i.hasSeatSelection&&o.one(".biz-link").setHTML("影院在线选座 &raquo;"),o.appendChild(a),o.effect.slideDown(),n.toggleClass("accordion-tab-selected")},failure:function(){}}}))},".accordion-label"),i.delegate("click",function(){var e=this;if(!e.hasClass("current")){var n,i=e.ancestor(".accordion-tab"),o=i.one(".accordion-content"),r=o.one(".current"),c=l.data(r,"date"),d=o.one(".c-"+c),s=l.data(e,"date"),u=o.one(".c-"+s);u?(d.hide(),u.show(),r.removeClass("current"),e.addClass("current"),o.setStyle("height","auto")):(n=l.data(i,"id"),a&&a.isInProgress()&&a.abort(),a=t("/deal/movieshows/"+n+"/"+s,{method:"GET",on:{success:function(t,n){var i=l.getEvalRes(n),a=i.data;d.hide(),o.append(a),o.setStyle("height","auto"),r.removeClass("current"),e.addClass("current")},failure:function(){}}}))}},".date-label")}},initUserReviews:function(n){function i(){c&&c.on("click",function(e){e.preventDefault();var n="/deal/checkfeedback/"+f;p?t(n,{method:"POST",on:{success:function(e,t){var n=l.getEvalRes(t),i=n.data;2===n.status?a():1===n.status?window.location.href="/rates/list/torate/"+i.orderid:o(n.msg)},failure:function(){},end:function(){}}}):a()})}function a(){e.use("www-dialog",function(){s?s.open():s=r.Dialog.login({origin:"deal-feedback",galabel:"deal/feedback/login",loginRef:h})})}function o(e){u||(u=new d({id:"check-failure-dialog"})),u.showResult({type:"tip",width:"480px",title:e}),u.open(),u.set("autoHide",3)}var c,s,u,g=e.one("#deal-default .user-reviews"),f=n.dealId,p=n.isLogin,h=n.loginRef;g&&(c=g.one(".to-rate"),e.on("domready",function(){window.location.href.indexOf("#anchor-reviews")>0&&window.scrollTo(0,g.getY()-46),i()}))},initImageSlide:function(t){function n(e){var t,n,o=i(e);o.length&&(e.setData("imgLoadNum",0).setData("imgMaxHeight",0),t=l(e,o),n=a(o.length),e.append(t).append(n),r(e,n,t,o.length))}function i(t){var n=t.getAttribute("data-params"),i=n.split("|"),a=[],l=/^http:\/\/.+\.(jpg|png|gif)(\?v=\d+)?$/i;return e.Array.each(i,function(e){e=o(e.replace(/\n/g,"")),l.test(e)&&a.push(e)}),a}function a(t){var n,i=e.Node.create('<ul class="trigger"></ul>'),a=[];for(n=0;n<t;++n)a.push('<li><a href="javascript:void(0)">'+(n+1)+"</a></li>");return i.setHTML(a.join("")),i.hide(),i}function l(t,n){var i,a=e.Node.create('<ul class="sheet"></ul>'),o=n.length,l=[];for(i=0;i<o;++i)l.push("<li><div><p><img src="+n[i]+" /></p></div></li>");return a.setHTML(l.join("")),a.all("li").hide(),a.one("li").show(),a.all("img").on("load",function(e){var n=e.target.get("height");n>t.getData("imgMaxHeight")&&t.setData("imgMaxHeight",n),t.setData("imgLoadNum",t.getData("imgLoadNum")+1)}),a}function r(n,i,a,o){n.getData("imgLoadNum")===o?(a.setStyle("height",n.getData("imgMaxHeight")+"px"),i.show(),n.setStyle("marginBottom","25px"),e.use("w-tab",function(e){new e.mt.widget.Tab(i.all("li"),a.all("li"),t)})):window.setTimeout(function(){r(n,i,a,o)},500)}var c=e.all(".imageslide");if(c.size()){var d={animStyle:"fade",slideEnabled:!0,slideInterval:5e3};t=t||{},e.mix(t,d),c.each(function(e){n(e)})}},initDealAsync:function(t,n,i,a){var o,l,r=e.one(".J-bottom-list-wrapper"),d=e.one(".J-side-deallist-wrapper"),s=this.AsyncLoader,u=null,g=null,f=M.window;r.setStyle("visibility","hidden"),r.show(),o={action:c.appendTrackingParams("/deal/sidedeallist/"+t),async:null,method:"GET",callback:function(e){var t=e.data;t&&(d.append(t),d.show())}},l={action:"/deal/bottomdeallist/"+t,wrapper:r,method:"GET",async:null,callback:function(t){t.data&&(r.append(t.data),t.trackData&&(t.trackData.url="deal/default"),e.use("mt-log",function(e){e.mt.log.moduleview(t.trackData)}),r.setStyle("visibility","visible"),u.detach(),g.detach())}},a&&s.requestModule(o),i&&(s.winHeight=e.DOM.winHeight(),u=f.resize(function(){s.winHeight=e.DOM.winHeight(),s.asyncLoadWithCheck(l)},12),g=f.scroll(function(){s.asyncLoadWithCheck(l)},12),s.asyncLoadWithCheck(l))},AsyncLoader:{winHeight:0,asyncLoadWithCheck:function(t){var n=e.one(window),i=n.get("docScrollY");t.wrapper.getY()<=i+2*this.winHeight&&this.requestModule(t)},requestModule:function(e){var n=e.action,i=e.method?e.method:"GET";e.async||(e.async=t(n,{method:i,on:{success:function(t,n){var i=l.getEvalRes(n);e.callback(i)},failure:function(){}}}))}}}},"1.0.0",{requires:["www-base","www-dialog","www-ratelist","www-hub","mt-component","www-tracker","mt-imageloader","www-add-cart","www-sku"]});
;M.add("www-pagenav",function(a){function e(e,t,n){n=n||{},this._ndPageNav=a.one(e),this.bindEvent(),this.gaBase=n.gaBase,this.callBack=t}var t='<li class="{class}"><a href="javascript:void(0);"{gaevent} hidefocus="true" data-index="{index}">{linkText}{tri}</a></li>';e.prototype={render:function(e){var t=[],n={hasHeadEnd:!0,currentPage:1,minPage:1,maxPage:99,extraNum:2,showNavCount:0,gaBase:""},s=this._ndPageNav;if(this.config=a.merge(n,e),n=this.config,n.currentPage<n.minPage||n.currentPage>n.maxPage||n.minPage===n.maxPage)return s.setHTML(""),void s.hide();this.getPrePage(t),this.getInnerPage(t),this.getNextPage(t),s.show(),s.setHTML(t.join(""))},getInnerPage:function(e){function n(n){l.minPage<=n&&l.maxPage>=n&&(n===l.currentPage?e.push('<li class="current"><span data-index="'+n+'">'+n+"</span></li>"):e.push(a.Lang.sub(t,{gaevent:r.getGA(n),index:n,tri:"","class":"page-link",linkText:n})))}var s,i,g,r=this,c=this._offset||0,u=c+1,l=r.config,o=0;if(l.showNavCount>0)for(i=parseInt(l.showNavCount/2,10),l.showNavCount>=l.maxPage?u=1:l.showNavCount-l.currentPage+c>=i&&l.currentPage!==c+1?u=c+1:(s=l.maxPage-l.currentPage<i?l.maxPage-l.currentPage:i,g=l.showNavCount-(l.currentPage-c)-s,u-=g,c-=g,u=u>0?u:1,c=c>0?c:0,r._offset=c);o<l.showNavCount;)n(u),o++,u++;else for(o=2*l.extraNum+1,u=l.currentPage-l.extraNum;o>0;)n(u),o--,u++},getPrePage:function(e){var n=this.config;n.currentPage===n.minPage?(n.hasHeadEnd&&e.push('<li class="first-page"><span>首页</span></li>'),e.push('<li class="previous"><span><i class="tri disable"></i>上一页</span></li>')):(n.hasHeadEnd&&e.push(a.Lang.sub(t,{gaevent:this.getGA("firstpage"),index:1,tri:"","class":"first-page",linkText:"首页"})),e.push(a.Lang.sub(t,{gaevent:this.getGA("prepage"),index:n.currentPage-1,"class":"previous",tri:'<i class="tri"></i>',linkText:"上一页"})))},getNextPage:function(e){var n=this.config;n.currentPage===n.maxPage?(e.push('<li class="next"><span>下一页<i class="tri disable"></i></span></li>'),n.hasHeadEnd&&e.push('<li class="last-page"><span>尾页</span></li>')):(e.push(a.Lang.sub(t,{gaevent:this.getGA("nextpage"),index:n.currentPage+1,"class":"next",tri:'<i class="tri"></i>',linkText:"下一页"})),n.hasHeadEnd&&e.push(a.Lang.sub(t,{gaevent:this.getGA("lastpage"),index:n.maxPage,tri:"","class":"last-page",linkText:"尾页"})))},getGA:function(a){var e=this.config.gaBase;return e?' gaevent="'+e+a+'"':""},bindEvent:function(){var a=this;this._ndPageNav.delegate("click",function(e){var t=parseInt(e.currentTarget.getAttribute("data-index"),10);a.callBack?a.callBack({index:t}):a.render({currentPage:t,maxPage:a.maxPage})},"a[data-index]")}},e.prototype.constructor=e,a.mt.www.PageNav=e},"1.0.0",{requires:["www-base"]});
;YUI.add("event-simulate",function(e,t){!function(){function t(t,n,o,r,i,a,s,g,E,b,d){if(t||e.error("simulateKeyEvent(): Invalid target."),u(n))switch(n=n.toLowerCase()){case"textevent":n="keypress";break;case"keyup":case"keydown":case"keypress":break;default:e.error("simulateKeyEvent(): Event type '"+n+"' not supported.")}else e.error("simulateKeyEvent(): Event type must be a string.");l(o)||(o=!0),l(r)||(r=!0),v(i)||(i=e.config.win),l(a)||(a=!1),l(s)||(s=!1),l(g)||(g=!1),l(E)||(E=!1),m(b)||(b=0),m(d)||(d=0);var f=null;if(c(e.config.doc.createEvent)){try{f=e.config.doc.createEvent("KeyEvents"),f.initKeyEvent(n,o,r,i,a,s,g,E,b,d)}catch(r){try{f=e.config.doc.createEvent("Events")}catch(i){f=e.config.doc.createEvent("UIEvents")}finally{f.initEvent(n,o,r),f.view=i,f.altKey=s,f.ctrlKey=a,f.shiftKey=g,f.metaKey=E,f.keyCode=b,f.charCode=d}}t.dispatchEvent(f)}else v(e.config.doc.createEventObject)?(f=e.config.doc.createEventObject(),f.bubbles=o,f.cancelable=r,f.view=i,f.ctrlKey=a,f.altKey=s,f.shiftKey=g,f.metaKey=E,f.keyCode=d>0?d:b,t.fireEvent("on"+n,f)):e.error("simulateKeyEvent(): No event simulation framework present.")}function n(t,n,o,r,i,a,s,b,d,f,h,y,p,K,L,w){t||e.error("simulateMouseEvent(): Invalid target."),u(n)?!g[n.toLowerCase()]&&!E[n]&&e.error("simulateMouseEvent(): Event type '"+n+"' not supported."):e.error("simulateMouseEvent(): Event type must be a string."),l(o)||(o=!0),l(r)||(r="mousemove"!==n),v(i)||(i=e.config.win),m(a)||(a=1),m(s)||(s=0),m(b)||(b=0),m(d)||(d=0),m(f)||(f=0),l(h)||(h=!1),l(y)||(y=!1),l(p)||(p=!1),l(K)||(K=!1),m(L)||(L=0),w=w||null;var N=null;if(c(e.config.doc.createEvent))N=e.config.doc.createEvent("MouseEvents"),N.initMouseEvent?N.initMouseEvent(n,o,r,i,a,s,b,d,f,h,y,p,K,L,w):(N=e.config.doc.createEvent("UIEvents"),N.initEvent(n,o,r),N.view=i,N.detail=a,N.screenX=s,N.screenY=b,N.clientX=d,N.clientY=f,N.ctrlKey=h,N.altKey=y,N.metaKey=K,N.shiftKey=p,N.button=L,N.relatedTarget=w),w&&!N.relatedTarget&&("mouseout"===n?N.toElement=w:"mouseover"===n&&(N.fromElement=w)),t.dispatchEvent(N);else if(v(e.config.doc.createEventObject)){switch(N=e.config.doc.createEventObject(),N.bubbles=o,N.cancelable=r,N.view=i,N.detail=a,N.screenX=s,N.screenY=b,N.clientX=d,N.clientY=f,N.ctrlKey=h,N.altKey=y,N.metaKey=K,N.shiftKey=p,L){case 0:N.button=1;break;case 1:N.button=4;break;case 2:break;default:N.button=0}N.relatedTarget=w,t.fireEvent("on"+n,N)}else e.error("simulateMouseEvent(): No event simulation framework present.")}function o(t,n,o,r,i,a){t||e.error("simulateUIEvent(): Invalid target."),u(n)?(n=n.toLowerCase(),d[n]||e.error("simulateUIEvent(): Event type '"+n+"' not supported.")):e.error("simulateUIEvent(): Event type must be a string.");var s=null;l(o)||(o=n in f),l(r)||(r="submit"===n),v(i)||(i=e.config.win),m(a)||(a=1),c(e.config.doc.createEvent)?(s=e.config.doc.createEvent("UIEvents"),s.initUIEvent(n,o,r,i,a),t.dispatchEvent(s)):v(e.config.doc.createEventObject)?(s=e.config.doc.createEventObject(),s.bubbles=o,s.cancelable=r,s.view=i,s.detail=a,t.fireEvent("on"+n,s)):e.error("simulateUIEvent(): No event simulation framework present.")}function r(t,n,o,r,i,a,s,c,u,l,v,m,g,E,b,d){var f;(!e.UA.ios||e.UA.ios<2)&&e.error("simulateGestureEvent(): Native gesture DOM eventframe is not available in this platform."),t||e.error("simulateGestureEvent(): Invalid target."),e.Lang.isString(n)?(n=n.toLowerCase(),y[n]||e.error("simulateTouchEvent(): Event type '"+n+"' not supported.")):e.error("simulateGestureEvent(): Event type must be a string."),e.Lang.isBoolean(o)||(o=!0),e.Lang.isBoolean(r)||(r=!0),e.Lang.isObject(i)||(i=e.config.win),e.Lang.isNumber(a)||(a=2),e.Lang.isNumber(s)||(s=0),e.Lang.isNumber(c)||(c=0),e.Lang.isNumber(u)||(u=0),e.Lang.isNumber(l)||(l=0),e.Lang.isBoolean(v)||(v=!1),e.Lang.isBoolean(m)||(m=!1),e.Lang.isBoolean(g)||(g=!1),e.Lang.isBoolean(E)||(E=!1),e.Lang.isNumber(b)||(b=1),e.Lang.isNumber(d)||(d=0),f=e.config.doc.createEvent("GestureEvent"),f.initGestureEvent(n,o,r,i,a,s,c,u,l,v,m,g,E,t,b,d),t.dispatchEvent(f)}function i(t,n,o,r,i,a,s,c,u,l,v,m,g,E,b,d,f,y,p){var K;t||e.error("simulateTouchEvent(): Invalid target."),e.Lang.isString(n)?(n=n.toLowerCase(),h[n]||e.error("simulateTouchEvent(): Event type '"+n+"' not supported.")):e.error("simulateTouchEvent(): Event type must be a string."),"touchstart"===n||"touchmove"===n?0===b.length&&e.error("simulateTouchEvent(): No touch object in touches"):"touchend"===n&&0===f.length&&e.error("simulateTouchEvent(): No touch object in changedTouches"),e.Lang.isBoolean(o)||(o=!0),e.Lang.isBoolean(r)||(r="touchcancel"!==n),e.Lang.isObject(i)||(i=e.config.win),e.Lang.isNumber(a)||(a=1),e.Lang.isNumber(s)||(s=0),e.Lang.isNumber(c)||(c=0),e.Lang.isNumber(u)||(u=0),e.Lang.isNumber(l)||(l=0),e.Lang.isBoolean(v)||(v=!1),e.Lang.isBoolean(m)||(m=!1),e.Lang.isBoolean(g)||(g=!1),e.Lang.isBoolean(E)||(E=!1),e.Lang.isNumber(y)||(y=1),e.Lang.isNumber(p)||(p=0),e.Lang.isFunction(e.config.doc.createEvent)?(e.UA.android?e.UA.android<4?(K=e.config.doc.createEvent("MouseEvents"),K.initMouseEvent(n,o,r,i,a,s,c,u,l,v,m,g,E,0,t),K.touches=b,K.targetTouches=d,K.changedTouches=f):(K=e.config.doc.createEvent("TouchEvent"),K.initTouchEvent(b,d,f,n,i,s,c,u,l,v,m,g,E)):e.UA.ios?e.UA.ios>=2?(K=e.config.doc.createEvent("TouchEvent"),K.initTouchEvent(n,o,r,i,a,s,c,u,l,v,m,g,E,b,d,f,y,p)):e.error("simulateTouchEvent(): No touch event simulation framework present for iOS, "+e.UA.ios+"."):e.error("simulateTouchEvent(): Not supported agent yet, "+e.UA.userAgent),t.dispatchEvent(K)):e.error("simulateTouchEvent(): No event simulation framework present.")}var a=e.Lang,s=e.config.win,c=a.isFunction,u=a.isString,l=a.isBoolean,v=a.isObject,m=a.isNumber,g={click:1,dblclick:1,mouseover:1,mouseout:1,mousedown:1,mouseup:1,mousemove:1,contextmenu:1},E=s&&s.PointerEvent?{pointerover:1,pointerout:1,pointerdown:1,pointerup:1,pointermove:1}:{MSPointerOver:1,MSPointerOut:1,MSPointerDown:1,MSPointerUp:1,MSPointerMove:1},b={keydown:1,keyup:1,keypress:1},d={submit:1,blur:1,change:1,focus:1,resize:1,scroll:1,select:1},f={scroll:1,resize:1,reset:1,submit:1,change:1,select:1,error:1,abort:1},h={touchstart:1,touchmove:1,touchend:1,touchcancel:1},y={gesturestart:1,gesturechange:1,gestureend:1};e.mix(f,g),e.mix(f,b),e.mix(f,h),e.Event.simulate=function(a,s,c){c=c||{},g[s]||E[s]?n(a,s,c.bubbles,c.cancelable,c.view,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget):b[s]?t(a,s,c.bubbles,c.cancelable,c.view,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.keyCode,c.charCode):d[s]?o(a,s,c.bubbles,c.cancelable,c.view,c.detail):h[s]?!(e.config.win&&"ontouchstart"in e.config.win)||e.UA.phantomjs||e.UA.chrome&&e.UA.chrome<6?e.error("simulate(): Event '"+s+"' can't be simulated. Use gesture-simulate module instead."):i(a,s,c.bubbles,c.cancelable,c.view,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.touches,c.targetTouches,c.changedTouches,c.scale,c.rotation):e.UA.ios&&e.UA.ios>=2&&y[s]?r(a,s,c.bubbles,c.cancelable,c.view,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.scale,c.rotation):e.error("simulate(): Event '"+s+"' can't be simulated.")}}()},"3.16.0",{requires:["event-base"]});
;YUI.add("async-queue",function(t,n){t.AsyncQueue=function(){this._init(),this.add.apply(this,arguments)};var i=t.AsyncQueue,e="shift",s="promote",u="remove",r=t.Lang.isObject,h=t.Lang.isFunction;i.defaults=t.mix({autoContinue:!0,iterations:1,timeout:10,until:function(){return this.iterations|=0,this.iterations<=0}},t.config.queueDefaults||{}),t.extend(i,t.EventTarget,{_running:!1,_init:function(){t.EventTarget.call(this,{prefix:"queue",emitFacade:!0}),this._q=[],this.defaults={},this._initEvents()},_initEvents:function(){this.publish({execute:{defaultFn:this._defExecFn,emitFacade:!0},shift:{defaultFn:this._defShiftFn,emitFacade:!0},add:{defaultFn:this._defAddFn,emitFacade:!0},promote:{defaultFn:this._defPromoteFn,emitFacade:!0},remove:{defaultFn:this._defRemoveFn,emitFacade:!0}})},next:function(){for(var t;this._q.length&&(t=this._q[0]=this._prepare(this._q[0]))&&t.until();)this.fire(e,{callback:t}),t=null;return t||null},_defShiftFn:function(t){0===this.indexOf(t.callback)&&this._q.shift()},_prepare:function(n){if(h(n)&&n._prepared)return n;var e=t.merge(i.defaults,{context:this,args:[],_prepared:!0},this.defaults,h(n)?{fn:n}:n),s=t.bind(function(){s._running||s.iterations--,h(s.fn)&&s.fn.apply(s.context||t,t.Array(s.args))},this);return t.mix(s,e)},run:function(){var t;if(this._executing)return this._running=!0,this;for(t=this.next();t&&!this.isRunning()&&(t.timeout<0?this._execute(t):this._schedule(t));t=this.next());return t||this.fire("complete"),this},_execute:function(t){this._running=t._running=!0,this._executing=t,t.iterations--,this.fire("execute",{callback:t});var n=this._running&&t.autoContinue;return this._running=t._running=!1,this._executing=!1,n},_schedule:function(n){return this._running=t.later(n.timeout,this,function(){this._execute(n)&&this.run()}),!1},isRunning:function(){return!!this._running},_defExecFn:function(t){t.callback()},add:function(){return this.fire("add",{callbacks:t.Array(arguments,0,!0)}),this},_defAddFn:function(n){var i=this._q,e=[];t.Array.each(n.callbacks,function(t){r(t)&&(i.push(t),e.push(t))}),n.added=e},pause:function(){return this._running&&r(this._running)&&this._running.cancel(),this._running=!1,this},stop:function(){return this._q=[],this._running&&r(this._running)&&(this._running.cancel(),this._running=!1),this._executing||this.run(),this},indexOf:function(t){for(var n,i=0,e=this._q.length;i<e;++i)if((n=this._q[i])===t||n.id===t)return i;return-1},getCallback:function(t){var n=this.indexOf(t);return n>-1?this._q[n]:null},promote:function(t){var n,i={callback:t};return this.isRunning()?n=this.after(e,function(){this.fire(s,i),n.detach()},this):this.fire(s,i),this},_defPromoteFn:function(t){var n=this.indexOf(t.callback),i=n>-1?this._q.splice(n,1)[0]:null;t.promoted=i,i&&this._q.unshift(i)},remove:function(t){var n,i={callback:t};return this.isRunning()?n=this.after(e,function(){this.fire(u,i),n.detach()},this):this.fire(u,i),this},_defRemoveFn:function(t){var n=this.indexOf(t.callback);t.removed=n>-1?this._q.splice(n,1)[0]:null},size:function(){return this.isRunning()||this.next(),this._q.length}})},"3.16.0",{requires:["event-custom"]});
